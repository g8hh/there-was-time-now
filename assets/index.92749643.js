var at=Object.defineProperty;var $e=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var be=(e,n,o)=>n in e?at(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Ne=(e,n)=>{for(var o in n||(n={}))it.call(n,o)&&be(e,o,n[o]);if($e)for(var o of $e(n))lt.call(n,o)&&be(e,o,n[o]);return e};var E=(e,n,o)=>(be(e,typeof n!="symbol"?n+"":n,o),o);import{r as G,u as Be,a as Ce,s as D,P as ct,Q as ut,b as dt,C as pt,c as mt,B as ht,G as _t,T as ft,d as gt,O as Et,A as Tt,e as Nt,D as Ot,E as It,f as vt,M as yt,g as Lt,N as St,h as bt,i as At,j as kt,k as wt,Z as Ct,S as Rt,l as Mt,m as Ee,n as Ut,o as B,p as oe,q as f,t as S,w as s,v as $,x as c,y as ye,z as C,F as R,H,I as $t,J as qe,K as se,L as g,R as i,U,V as Xe,W as ce,X as J,Y as ue,_ as pe,$ as xt,a0 as Ht,a1 as Ze,a2 as ze,a3 as je,a4 as ae,a5 as xe,a6 as Gt,a7 as He,a8 as Ge,a9 as Pt,aa as Dt,ab as ke,ac as Pe,ad as De,ae as Qe,af as Yt,ag as Te,ah as Ft,ai as Wt,aj as Bt,ak as de,al as qt,am as Xt,an as Ke,ao as Zt,ap as zt,aq as jt,ar as Qt,as as Kt,at as Vt,au as Jt,av as en,aw as tn,ax as nn,ay as on,az as sn,aA as rn,aB as an,aC as ln,aD as j,aE as cn,aF as un,aG as dn,aH as pn,aI as mn,aJ as hn,aK as _n,aL as fn,aM as gn,aN as En,aO as Tn,aP as Nn}from"./vendor.5a974f55.js";const On=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const _ of r)if(_.type==="childList")for(const u of _.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const _={};return r.integrity&&(_.integrity=r.integrity),r.referrerpolicy&&(_.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?_.credentials="include":r.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function a(r){if(r.ep)return;r.ep=!0;const _=o(r);fetch(r.href,_)}};On();var x=(e=>(e.INTRO="initial",e.UNLOCK_WORKERS="unlock-workers",e.UNLOCK_COUNTDOWN="unlock-countdown",e.UNLOCK_SLOWDOWN="unlock-slowdown",e.UNLOCK_YOUNG_LENNOX="unlock-young-lennox",e.HALFWAY="halfway",e.SPEAK_TO_LENNOX="speak-to-lennox",e.UNLOCK_SAMA="unlock-sama",e.SPEAK_TO_SAMA="speak-to-sama",e.UNLOCK_ITOTIA="unlock-itotia",e.UNLOCK_NECHTAN="unlock-nechtan",e.SUCCESS="success",e.FAILURE="failure",e))(x||{}),l=(e=>(e.LENNOX_OLD="lennox-old",e.LENNOX_YOUNG="lennox-young",e.SAMA="sama",e.ITOTIA="itotia",e.NECHTAN="nechtan",e))(l||{}),t=(e=>(e.PHYSICS="physics",e.QUANTUM_COMPUTING="quantum-computing",e.QUANTUM_COMPUTER="quantum-computer",e.CHRONOCRYSTALS="chronocrystals",e.BIOLOGY="biology",e.GENETIC_MEMORY="genetic-memory",e.TELOMERE_STRETCHER="telomere-stretcher",e.THE_FLUID="the-fluid",e.ALCHEMY="alchemy",e.CHRONOMOGRIFICATION="chronomogrification",e.DISTILLER="distiller",e.ELEMENT_ZERO="element-zero",e.MATHEMATICS="mathematics",e.TIMELESS_ALGEBRA="timeless-algebra",e.NEPOHUALTZINTZIN="nepohualtzintzin",e.OBSIDIAN="obsidian",e.ASTRONOMY="astronomy",e.AETHERIC_HOROSCOPES="aetheric-horoscopes",e.ZODIAC_TALISMAN="zodiac-talisman",e.SARSEN_STONES="sarsen-stones",e.CRYSTAL_SARCOPHAGUS="crystal-sarcophagus",e.OMEGAPERSON="omegaperson",e.PHILOSOPHERS_STONE="philosophers-stone",e.TZOLKIN="tzolkin",e.TIMEHENGE="timehenge",e))(t||{}),ve=(e=>(e.GAME_STATE="gameState",e))(ve||{});const In=G(!1),vn=G(!1),yn=G(!1),Ln=G(!1),Sn=G(!1),bn=G(!0),An=Be(0,!0),kn=G(!1),wn=G(!1),Cn=G(!1),Rn=G(!1),Mn=G(l.LENNOX_OLD),Un=G(!1);function K(){return{confetti:Un,countdownTriggered:Sn,currentPerson:Mn,gameWon:yn,gameEnded:Ln,gamePaused:vn,gameStarted:In,isLoading:bn,saveStopwatch:An,sellFeatureEnabled:kn,slowdownEnabled:wn,spokeToLennox:Cn,spokeToSama:Rn}}const $n=G(0);function Re(){return{currency:$n}}class Ve{constructor(){E(this,"isUnlocked",!1);E(this,"unlockedBy",null);E(this,"unlockThreshold",0)}setUnlock(n,o){this.unlockedBy=n,this.unlockThreshold=o}}class ne extends Ve{constructor(n,o,a,r){super();E(this,"key");E(this,"name");E(this,"year");E(this,"messageList",new Array);E(this,"workerTitle");this.key=n,this.name=o,this.year=a,this.workerTitle=r}numUnread(){let n=0;return this.messageList.forEach(o=>{o.isRead||n++}),n}markRead(){this.messageList.forEach(n=>{n.isRead=!0})}}class k extends Ve{constructor(n,o,a,r,_,u){super();E(this,"key");E(this,"label");E(this,"icon");E(this,"color");E(this,"isDevice");E(this,"personKey");E(this,"speed",10);E(this,"expand",1);E(this,"price",5);E(this,"workerCost",5);E(this,"total",0);E(this,"current",0);E(this,"isIncrementing",!1);E(this,"numWorkers",0);E(this,"researchRequirementList",new Array);this.key=n,this.label=o,this.icon=a,this.color=r,this.isDevice=_,this.personKey=u}setNumbers(n,o,a,r){this.speed=n,this.expand=o,this.price=a,this.workerCost=r}}class M{constructor(n,o){E(this,"researchKey");E(this,"quantity");this.researchKey=n,this.quantity=o}}const _e=Ce({[l.LENNOX_OLD]:new ne(l.LENNOX_OLD,"Lennox (1984)",1984,"Undergrads"),[l.LENNOX_YOUNG]:new ne(l.LENNOX_YOUNG,"Lennox (1934)",1934,"Lab Partners"),[l.SAMA]:new ne(l.SAMA,"Sama (904)",904,"Research Assistants"),[l.ITOTIA]:new ne(l.ITOTIA,"Itotia (374)",374,"Numeric Priests"),[l.NECHTAN]:new ne(l.NECHTAN,"Nechtan (2524 BC)",0,"Druids")}),h=Ce({[t.PHYSICS]:new k(t.PHYSICS,"Physics",D(ct),"#F72585",!1,l.LENNOX_OLD),[t.QUANTUM_COMPUTING]:new k(t.QUANTUM_COMPUTING,"Quantum Computing",D(ut),"#B5179E",!1,l.LENNOX_OLD),[t.QUANTUM_COMPUTER]:new k(t.QUANTUM_COMPUTER,"Quantum Computer",D(dt),"#4361EE",!1,l.LENNOX_OLD),[t.CHRONOCRYSTALS]:new k(t.CHRONOCRYSTALS,"Chronocrystals",D(pt),"#4CC9F0",!1,l.LENNOX_OLD),[t.CRYSTAL_SARCOPHAGUS]:new k(t.CRYSTAL_SARCOPHAGUS,"Crystal Sarcophagus",D(mt),"#e0c3fc",!0,l.LENNOX_OLD),[t.BIOLOGY]:new k(t.BIOLOGY,"Biology",D(ht),"#f4e285",!1,l.LENNOX_YOUNG),[t.GENETIC_MEMORY]:new k(t.GENETIC_MEMORY,"Genetic Memory",D(_t),"#FEFAE0",!1,l.LENNOX_YOUNG),[t.TELOMERE_STRETCHER]:new k(t.TELOMERE_STRETCHER,"Telomere Stretcher",D(ft),"#bc6c25",!1,l.LENNOX_YOUNG),[t.THE_FLUID]:new k(t.THE_FLUID,"The Fluid",D(gt),"#606c38",!1,l.LENNOX_YOUNG),[t.OMEGAPERSON]:new k(t.OMEGAPERSON,"Omegaperson",D(Et),"#fb8500",!0,l.LENNOX_YOUNG),[t.ALCHEMY]:new k(t.ALCHEMY,"Alchemy",D(Tt),"#bfc0c0",!1,l.SAMA),[t.CHRONOMOGRIFICATION]:new k(t.CHRONOMOGRIFICATION,"Chronomogrification",D(Nt),"#FFFFFF",!1,l.SAMA),[t.DISTILLER]:new k(t.DISTILLER,"Distiller",D(Ot),"#EF8354",!1,l.SAMA),[t.ELEMENT_ZERO]:new k(t.ELEMENT_ZERO,"Element Zero",D(It),"#4f5d75",!1,l.SAMA),[t.PHILOSOPHERS_STONE]:new k(t.PHILOSOPHERS_STONE,"Philosopher's Stone",D(vt),"#d4af37",!0,l.SAMA),[t.MATHEMATICS]:new k(t.MATHEMATICS,"Mathematics",D(yt),"#48d7e7",!1,l.ITOTIA),[t.TIMELESS_ALGEBRA]:new k(t.TIMELESS_ALGEBRA,"Timeless Algebra",D(Lt),"#f168a7",!1,l.ITOTIA),[t.NEPOHUALTZINTZIN]:new k(t.NEPOHUALTZINTZIN,"Nepohualtzintzin",D(St),"#f1cbe6",!1,l.ITOTIA),[t.OBSIDIAN]:new k(t.OBSIDIAN,"Obsidian",D(bt),"#f9d567",!1,l.ITOTIA),[t.TZOLKIN]:new k(t.TZOLKIN,"Tzolk'in",D(At),"#8cb369",!0,l.ITOTIA),[t.ASTRONOMY]:new k(t.ASTRONOMY,"Astronomy",D(kt),"#2c7da0",!1,l.NECHTAN),[t.AETHERIC_HOROSCOPES]:new k(t.AETHERIC_HOROSCOPES,"Aetheric Horoscopes",D(wt),"#468faf",!1,l.NECHTAN),[t.ZODIAC_TALISMAN]:new k(t.ZODIAC_TALISMAN,"Zodiac Talisman",D(Ct),"#61a5c2",!1,l.NECHTAN),[t.SARSEN_STONES]:new k(t.SARSEN_STONES,"Sarsen Stones",D(Rt),"#89c2d9",!1,l.NECHTAN),[t.TIMEHENGE]:new k(t.TIMEHENGE,"Timehenge",D(Mt),"#a9d6e5",!0,l.NECHTAN)}),xn=Ce(Ne(Ne({},_e),h));function Hn(){h[t.QUANTUM_COMPUTING].setUnlock(t.PHYSICS,10),h[t.QUANTUM_COMPUTER].setUnlock(t.QUANTUM_COMPUTING,10),h[t.GENETIC_MEMORY].setUnlock(t.BIOLOGY,11),h[t.TELOMERE_STRETCHER].setUnlock(t.GENETIC_MEMORY,11),h[t.CHRONOMOGRIFICATION].setUnlock(t.ALCHEMY,12),h[t.DISTILLER].setUnlock(t.CHRONOMOGRIFICATION,12),h[t.TIMELESS_ALGEBRA].setUnlock(t.MATHEMATICS,13),h[t.NEPOHUALTZINTZIN].setUnlock(t.TIMELESS_ALGEBRA,13),h[t.AETHERIC_HOROSCOPES].setUnlock(t.ASTRONOMY,15),h[t.ZODIAC_TALISMAN].setUnlock(t.AETHERIC_HOROSCOPES,15),h[t.SARSEN_STONES].setUnlock(t.ZODIAC_TALISMAN,15),h[t.TIMEHENGE].setUnlock(t.ZODIAC_TALISMAN,15)}function Gn(){h[t.QUANTUM_COMPUTING].researchRequirementList.push(new M(t.PHYSICS,1)),h[t.QUANTUM_COMPUTER].researchRequirementList.push(new M(t.QUANTUM_COMPUTING,2)),h[t.CHRONOCRYSTALS].researchRequirementList.push(new M(t.QUANTUM_COMPUTER,3)),h[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.CHRONOCRYSTALS,10)),h[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.OMEGAPERSON,1)),h[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.PHILOSOPHERS_STONE,1)),h[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.TZOLKIN,1)),h[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.TIMEHENGE,1)),h[t.GENETIC_MEMORY].researchRequirementList.push(new M(t.BIOLOGY,1)),h[t.TELOMERE_STRETCHER].researchRequirementList.push(new M(t.GENETIC_MEMORY,2)),h[t.THE_FLUID].researchRequirementList.push(new M(t.TELOMERE_STRETCHER,3)),h[t.OMEGAPERSON].researchRequirementList.push(new M(t.THE_FLUID,10)),h[t.OMEGAPERSON].researchRequirementList.push(new M(t.PHILOSOPHERS_STONE,1)),h[t.OMEGAPERSON].researchRequirementList.push(new M(t.TZOLKIN,1)),h[t.OMEGAPERSON].researchRequirementList.push(new M(t.TIMEHENGE,1)),h[t.CHRONOMOGRIFICATION].researchRequirementList.push(new M(t.ALCHEMY,1)),h[t.DISTILLER].researchRequirementList.push(new M(t.CHRONOMOGRIFICATION,2)),h[t.ELEMENT_ZERO].researchRequirementList.push(new M(t.DISTILLER,3)),h[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.ELEMENT_ZERO,10)),h[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.TZOLKIN,1)),h[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.TIMEHENGE,1)),h[t.TIMELESS_ALGEBRA].researchRequirementList.push(new M(t.MATHEMATICS,1)),h[t.NEPOHUALTZINTZIN].researchRequirementList.push(new M(t.TIMELESS_ALGEBRA,2)),h[t.OBSIDIAN].researchRequirementList.push(new M(t.NEPOHUALTZINTZIN,3)),h[t.TZOLKIN].researchRequirementList.push(new M(t.OBSIDIAN,10)),h[t.TZOLKIN].researchRequirementList.push(new M(t.TIMEHENGE,1)),h[t.AETHERIC_HOROSCOPES].researchRequirementList.push(new M(t.ASTRONOMY,1)),h[t.ZODIAC_TALISMAN].researchRequirementList.push(new M(t.AETHERIC_HOROSCOPES,2)),h[t.SARSEN_STONES].researchRequirementList.push(new M(t.ZODIAC_TALISMAN,3)),h[t.TIMEHENGE].researchRequirementList.push(new M(t.SARSEN_STONES,10))}function Pn(){h[t.PHYSICS].setNumbers(10,1,5,5),h[t.QUANTUM_COMPUTING].setNumbers(7.5,1,6,6),h[t.QUANTUM_COMPUTER].setNumbers(5,1.02,7,7),h[t.CHRONOCRYSTALS].setNumbers(.5,1,8,8),h[t.CRYSTAL_SARCOPHAGUS].setNumbers(.125,1,0,0),h[t.BIOLOGY].setNumbers(10,1,9,9),h[t.GENETIC_MEMORY].setNumbers(5,1,10,10),h[t.TELOMERE_STRETCHER].setNumbers(2.5,1.02,11,11),h[t.THE_FLUID].setNumbers(1,1,12,12),h[t.OMEGAPERSON].setNumbers(.125,1,0,0),h[t.ALCHEMY].setNumbers(10,1,13,13),h[t.CHRONOMOGRIFICATION].setNumbers(2.5,1,14,14),h[t.DISTILLER].setNumbers(1,1.02,15,15),h[t.ELEMENT_ZERO].setNumbers(.5,1,16,16),h[t.PHILOSOPHERS_STONE].setNumbers(.125,1,0,0),h[t.MATHEMATICS].setNumbers(10,1,17,17),h[t.TIMELESS_ALGEBRA].setNumbers(1,1,18,18),h[t.NEPOHUALTZINTZIN].setNumbers(.5,1.02,19,19),h[t.OBSIDIAN].setNumbers(.25,1,20,20),h[t.TZOLKIN].setNumbers(.125,1,0,0),h[t.ASTRONOMY].setNumbers(10,1,21,21),h[t.AETHERIC_HOROSCOPES].setNumbers(.5,1,22,22),h[t.ZODIAC_TALISMAN].setNumbers(.25,1.02,23,23),h[t.SARSEN_STONES].setNumbers(.1,1,24,24),h[t.TIMEHENGE].setNumbers(.125,1,0,0)}Hn();Gn();Pn();function re(){h[t.PHYSICS].isUnlocked=!0,_e[l.LENNOX_OLD].isUnlocked=!0;const e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());if(n.UNLOCK_ALL==="true"){for(const o in _e)_e[o].isUnlocked=!0;for(const o in h)h[o].isUnlocked=!0,h[o].isDevice||(h[o].total=100)}if(n.QUICK_MODE==="true")for(const o in h)h[o].speed=100;return{personList:_e,researchList:h,unlockableList:xn}}const ie={INITIAL_TIME:300,INITIAL_EXPANSION_CONSTANT:1,NOTIFICATION_DURATION:1e4,SAVE_INTERVAL:30,DB_NAME:"There Was Time Now"};class Dn{constructor(){E(this,"stopwatch");this.stopwatch=Be(0,!0)}restart(n){this.stopwatch.reset(n)}secondsElapsed(){return this.stopwatch.seconds.value+this.stopwatch.minutes.value*60+this.stopwatch.hours.value*3600+this.stopwatch.days.value*86400}start(){this.stopwatch.start()}stop(){this.stopwatch.pause()}}class Yn{constructor(){E(this,"timer");const n=new Date,o=n.getSeconds()+ie.INITIAL_TIME;n.setSeconds(o),this.timer=Ut(n.getTime(),!1)}resume(){this.timer.resume()}start(){this.timer.start()}restart(n){const o=new Date,a=o.getSeconds()+n;o.setSeconds(a),this.timer.restart(o.getTime(),!0)}stop(){this.timer.pause()}realPeopleTimeLeft(){const n=this.timer.days.value>0?" "+this.timer.days.value+" days":"",o=this.timer.hours.value>0?" "+this.timer.hours.value+" hours":"",a=this.timer.minutes.value>0?" "+this.timer.minutes.value+" minutes":"",r=this.timer.seconds.value>0?" "+this.timer.seconds.value+" seconds":"";return n+o+a+r}secondsLeft(){return this.timer.seconds.value+this.timer.minutes.value*60+this.timer.hours.value*3600+this.timer.days.value*86400}isExpired(){return this.timer.isExpired.value}isRunning(){return this.timer.isRunning.value}}const fe=new Yn,Ye=new Dn,ge=G(ie.INITIAL_EXPANSION_CONSTANT);function Fn(e){if(fe.isRunning()){if(ge.value>=1e3){ge.value=1e3;return}ge.value*=e;const n=fe.secondsLeft(),o=new Date;o.setSeconds(o.getSeconds()+n*e),fe.restart(n*e)}}function me(){const e=Ee(()=>{let o=ie.INITIAL_TIME-n.value;return o+=Ye.secondsElapsed(),o}),n=Ee(()=>{let o=fe.secondsLeft();return o/=ge.value,Math.round(o)});return{countdownTimer:fe,countupTimer:Ye,expandConstant:ge,expandTime:Fn,timeElapsed:e,timeLeft:n}}const Fe=[1,5,10],Oe=G(0);function le(){const{currency:e}=Re(),{gamePaused:n,slowdownEnabled:o}=K(),{researchList:a}=re(),{expandTime:r}=me(),_=(N,Z)=>!(N.total<Z),u=(N,Z)=>Z*N.price,m=(N,Z)=>{N.total-=Z;const y=u(N,Z);e.value+=y},d=N=>e.value>=N.workerCost,T=N=>N.workerCost,v=N=>N.numWorkers>0,O=N=>N.workerCost,p=N=>{d(N)&&(N.numWorkers++,e.value-=N.workerCost,N.numWorkers==1&&X(N))},A=N=>{v(N)&&(N.numWorkers--,e.value+=N.workerCost)},I=()=>{Oe.value++,Oe.value>Fe.length-1&&(Oe.value=0)},w=()=>Fe[Oe.value],F=N=>N.researchRequirementList.filter(Z=>a[Z.researchKey].total<Z.quantity).length==0,b=N=>{N.forEach(Z=>{a[Z.researchKey].total-=Z.quantity})},P=(N,Z)=>{if(N.isIncrementing)Z&&N.numWorkers>0&&setTimeout(()=>X(N),ee(N));else{N.isIncrementing=!0,N.isDevice||b(N.researchRequirementList);const y=setInterval(function(){n.value||(N.current+=N.speed*(1+N.numWorkers/50),N.current>=100&&(clearInterval(y),setTimeout(function(){N.isDevice||(N.current=0,N.isIncrementing=!1),N.total+=1,o.value&&r(N.expand)},200),Z&&N.numWorkers>0&&setTimeout(()=>X(N),ee(N))))},100)}},X=N=>{N.numWorkers>0&&(F(N)?P(N,!0):setTimeout(()=>X(N),ee(N)))},ee=N=>1e4/((N.numWorkers+2)/2);return{buyWorker:p,buyWorkerCost:T,canBuyWorker:d,canIncrementResearch:F,canSellResearch:_,canSellWorker:v,changeSellIncrement:I,incrementResearch:P,sellIncrement:w,sellResearch:m,sellResearchPrice:u,sellWorker:A,sellWorkerCost:O,startIncrements:()=>{Object.values(a).forEach(N=>{X(N)})}}}var Y=(e,n)=>{const o=e.__vccOpts||e;for(const[a,r]of n)o[a]=r;return o};const Wn=B({components:{NButton:oe},props:{research:k},setup(){const{sellFeatureEnabled:e}=K(),{canIncrementResearch:n,incrementResearch:o}=le();return{canIncrementResearch:n,displayButtonText:()=>window.innerWidth>700||!e.value,incrementResearch:o,renderIcon:_=>$(_)}}}),Bn={key:0};function qn(e,n,o,a,r,_){const u=c("n-button");return f(),S(u,{ghost:"",round:"",color:e.research.color,disabled:!e.canIncrementResearch(e.research),onClick:n[0]||(n[0]=m=>e.incrementResearch(e.research))},{icon:s(()=>[(f(),S(ye(e.renderIcon(e.research.icon))))]),default:s(()=>[e.displayButtonText()?(f(),C("span",Bn,R(e.research.label),1)):H("",!0)]),_:1},8,["color","disabled"])}var Je=Y(Wn,[["render",qn]]);const Xn=B({}),Zn=$t(' made for the new year&#39;s incremental game jam (2022) <br data-v-26b636b4><br data-v-26b636b4> this is a game about &quot;science&quot; and &quot;time&quot; <br data-v-26b636b4><br data-v-26b636b4> programming by pbrane <div class="indent" data-v-26b636b4><a href="https://github.com/pbr4ne" style="color:#00FF00;" target="_blank" rel="noopener" data-v-26b636b4> github </a><br data-v-26b636b4><a href="https://pbrane.itch.io/" style="color:#00FF00;" target="_blank" rel="noopener" data-v-26b636b4> itch.io </a><br data-v-26b636b4><a href="https://plaza.dsolver.ca/m/pbrane_dev" style="color:#00FF00;" target="_blank" rel="noopener" data-v-26b636b4> incremental games plaza </a></div><br data-v-26b636b4> writing by James Funfer <div class="indent" data-v-26b636b4><a href="https://jamesfunfer.com/" style="color:#F72585;" target="_blank" rel="noopener" data-v-26b636b4> author page </a><br data-v-26b636b4><a href="https://www.amazon.com/Crystal-Promise-Shattered-Book/dp/0615665195" style="color:#F72585;" target="_blank" rel="noopener" data-v-26b636b4> Crystal Promise: The Shattered Crystal: Book 1 </a></div><br data-v-26b636b4> special thanks to: <div class="indent" data-v-26b636b4> goodjukel<br data-v-26b636b4> mystic<br data-v-26b636b4> j9<br data-v-26b636b4> grape tomato<br data-v-26b636b4> kyrr\u2202<br data-v-26b636b4> lady julz<br data-v-26b636b4> zelda<br data-v-26b636b4> dish court boohbahs </div><br data-v-26b636b4><span data-v-26b636b4>v0.8</span>',16);function zn(e,n,o,a,r,_){return Zn}var jn=Y(Xn,[["render",zn],["__scopeId","data-v-26b636b4"]]);const Qn=B({components:{NButton:oe,NInput:qe,NSpace:se},props:{exportMessage:{type:Object,required:!0},exportString:{type:String,required:!0}},emits:["close-export","copy-to-clipboard"],setup(e,{emit:n}){return{closeExport:()=>{n("close-export")},copyExport:()=>{n("copy-to-clipboard",e.exportString)}}}}),Kn={style:{color:"#58c9a4"}},Vn=U(" Copy to Clipboard "),Jn=U(" Done! ");function eo(e,n,o,a,r,_){const u=c("n-input"),m=c("n-button"),d=c("n-space");return f(),S(d,{vertical:""},{default:s(()=>[g("span",Kn,R(e.exportMessage.value),1),i(u,{value:e.exportString,autosize:{minRows:10,maxRows:10},type:"textarea"},null,8,["value"]),i(d,{justify:"end"},{default:s(()=>[i(m,{onClick:e.copyExport},{default:s(()=>[Vn]),_:1},8,["onClick"]),i(m,{type:"warning",onClick:e.closeExport},{default:s(()=>[Jn]),_:1},8,["onClick"])]),_:1})]),_:1})}var to=Y(Qn,[["render",eo]]);const no=B({components:{NButton:oe,NInput:qe,NSpace:se},props:{importError:{type:Object,required:!0}},emits:["cancel-import","import-string"],setup(e,{emit:n}){const o=G("");return{cancelImport:()=>{n("cancel-import")},imp:o,importString:()=>{n("import-string",o)}}}}),oo=g("span",null,[g("em",null,"This will overwrite your progress!")],-1),so={key:0,style:{color:"#FF4136"}},ro=U(" Cancel "),ao=U(" Import ");function io(e,n,o,a,r,_){const u=c("n-input"),m=c("n-button"),d=c("n-space");return f(),S(d,{vertical:""},{default:s(()=>[oo,e.importError.value?(f(),C("span",so,"Error importing game.")):H("",!0),i(u,{value:e.imp,"onUpdate:value":n[0]||(n[0]=T=>e.imp=T),autosize:{minRows:10,maxRows:10},placeholder:"Paste your export here",type:"textarea"},null,8,["value"]),i(d,{justify:"end"},{default:s(()=>[i(m,{onClick:e.cancelImport},{default:s(()=>[ro]),_:1},8,["onClick"]),i(m,{type:"warning",onClick:e.importString},{default:s(()=>[ao]),_:1},8,["onClick"])]),_:1})]),_:1})}var lo=Y(no,[["render",io]]);const co=B({components:{NH4:Xe}}),uo=U(" v0.8 - 2022-03-02 "),po=g("ul",null,[g("li",null,"freeze footer to bottom"),g("li",null,"minor balancing tweaks")],-1),mo=U(" v0.7 - 2022-02-06 "),ho=g("ul",null,[g("li",null,"prevent time expansion from continuing to expand time at 1000")],-1),_o=U(" v0.6 - 2022-02-06 "),fo=g("ul",null,[g("li",null,"fixed device button being incorrectly disabled")],-1),go=U(" v0.5 - 2022-02-04 "),Eo=g("ul",null,[g("li",null,"tooltips no longer stay alive when you mouse over them"),g("li",null,"added a button to device, for clarity"),g("li",null,"fixed time expansion cap - limit of exactly 1000")],-1),To=U(" v0.4 - 2022-01-30 "),No=g("ul",null,[g("li",null,"non-backwards-compatible change to saves, sorry!"),g("li",null,"copy export to clipboard"),g("li",null,"added icons and colours to the timelines and dialog boxes"),g("li",null,"every character gets their own timeline messages"),g("li",null,"fixed dialog bug attributing the wrong character"),g("li",null,"fixed game countdown continuing after game has ended but you unpause")],-1),Oo=U(" v0.3 - 2022-01-29 "),Io=g("ul",null,[g("li",null,"added import & export"),g("li",null,"added pause! also pauses automatically for all dialogs"),g("li",null,"added autosave message"),g("li",null,"added version history dialog"),g("li",null,"fixed exploit where you could hold down enter to research too rapidly"),g("li",null,"fixed some issues with internal timers"),g("li",null,"fixed bug with local save")],-1),vo=U(" v0.2 - 2022-01-16 "),yo=g("ul",null,[g("li",null,"fixed bug where win scenario did not trigger")],-1),Lo=U(" v0.1 - 2022-01-15 "),So=g("ul",null,[g("li",null,"initial version for new year's incremental game jam")],-1);function bo(e,n,o,a,r,_){const u=c("n-h4");return f(),C(ce,null,[i(u,{style:{color:"#bc6c25"}},{default:s(()=>[uo]),_:1}),po,i(u,{style:{color:"#FEFAE0"}},{default:s(()=>[mo]),_:1}),ho,i(u,{style:{color:"#f4e285"}},{default:s(()=>[_o]),_:1}),fo,i(u,{style:{color:"#e0c3fc"}},{default:s(()=>[go]),_:1}),Eo,i(u,{style:{color:"#4CC9F0"}},{default:s(()=>[To]),_:1}),No,i(u,{style:{color:"#4361EE"}},{default:s(()=>[Oo]),_:1}),Io,i(u,{style:{color:"#B5179E"}},{default:s(()=>[vo]),_:1}),yo,i(u,{style:{color:"#F72585"}},{default:s(()=>[Lo]),_:1}),So],64)}var Ao=Y(co,[["render",bo]]);const ko=B({components:{NButton:oe,NH4:Xe,NIcon:J,NSpace:se},props:{messageList:{type:Array,required:!0},displayMessageTitle:{type:Boolean,default:!1}},setup(){return{messageIcon:e=>e?$(e):$(ue)}}}),Me=e=>(xt("data-v-7c7834fe"),e=e(),Ht(),e),wo=Me(()=>g("br",null,null,-1)),Co={key:0},Ro={key:0,class:"person"},Mo=Me(()=>g("br",null,null,-1)),Uo=Me(()=>g("br",null,null,-1));function $o(e,n,o,a,r,_){const u=c("n-icon"),m=c("n-button");return f(),C("div",null,[wo,(f(!0),C(ce,null,pe(e.messageList,d=>(f(),C("div",{key:d.title},[e.displayMessageTitle?(f(),C("span",Co,[i(m,{text:""},{icon:s(()=>[i(u,{color:d.color},{default:s(()=>[(f(),S(ye(e.messageIcon(d.icon))))]),_:2},1032,["color"])]),default:s(()=>[g("strong",null,R(d.title),1)]),_:2},1024)])):H("",!0),(f(!0),C(ce,null,pe(d.messageSections,T=>(f(),C("div",{key:T.text},[T.person?(f(),C("span",Ro,R(T.person?T.person+": ":null),1)):H("",!0),g("span",null,R(T.text),1),Mo,Uo]))),128))]))),128))])}var we=Y(ko,[["render",$o],["__scopeId","data-v-7c7834fe"]]);function et(){const{countdownTriggered:e,gameEnded:n,gamePaused:o}=K(),{countdownTimer:a,countupTimer:r}=me();return{pause:()=>{a.stop(),r.stop(),o.value=!0},unpause:()=>{o.value=!1,n.value||(e.value?a.resume():r.start())}}}class L{constructor(n,o,a,r){E(this,"title");E(this,"messageSections");E(this,"timestamp","");E(this,"isRead",!1);E(this,"wasSent",!1);E(this,"icon");E(this,"color","");this.title=n,this.messageSections=o,this.icon=a||ue,this.color=r}}const W={[x.INTRO]:new L("Intro",[{text:"The year is 1984. You are Lennox, a physicist researching the most cutting-edge technology: Quantum Computing! With enough research, you should be able to build your own Quantum Computer."},{text:"Let's get started..."}],ue),[x.UNLOCK_COUNTDOWN]:new L("You fire up your very first quantum computer.",[{person:"Quantum Computer",text:"Beep Boop. Detecting timelines. ALERT. ALERT. YOUR QUANTUM REALITY HAS SKEWED INTO A TANGENT. TIME IS ENDING. DOOMSDAY IMMINENT."},{person:"Lennox",text:"Great Scott! What am I going to do? I'll need to invent a way to slow down time so that I have enough time to fix time!"}]),[x.UNLOCK_WORKERS]:new L("A Breakthrough.",[{person:"Lennox",text:"Eureka! If I reroute the nanoseconds through the quantum flux thingamajig in the compumatrix, I *should* be able to slow time down. If only I had some undergrads to help, this is a lot of work and I haven't even had time to order a pizza - the most important element of research!"}]),[x.UNLOCK_SLOWDOWN]:new L("The Undergrads make themselves useful.",[{person:"Undergrad",text:"Dr. Lennox. Dr. Lennox, take a look at this. It appears there is indeed a way to *add* more time before the Doomsday Event."},{person:"Lennox",text:"I thought we were calling it the Doomsminute Event."},{person:"Undergrad",text:"The media disagreed. What's important is that we can spend research to SLOW time down. So that we have more time... so to speak... to solve our time problem."},{person:"Lennox",text:"Then it looks like it's time for the next phase."}]),[x.UNLOCK_YOUNG_LENNOX]:new L("The Discovery of the Device.",[{person:"Lennox",text:"We've done it. We've found a way to stop the Doomsminute Event. We need to build THE DEVICE!"},{person:"Undergrad",text:"Doctor. We've got a problem. Our research indicates that, with the exception of quantum physics, the kind of research required to complete THE DEVICE has been lost."},{person:"Lennox",text:"Lost how?"},{person:"Undergrad",text:"Lost to time."},{person:"Lennox",text:"What *kind* of research?"},{person:"Undergrad",text:"Well. It appears that only one scientist, back in the 30s, was doing this kind of biological research\u2026"},{person:"Lennox",text:"WHO?"},{person:"Undergrad",text:"Well\u2026YOU, doctor!"},{person:"Lennox",text:"By the Code!"},{person:"Narrator",text:"And it was at that time that Lennox experienced a *flashback*"}]),[x.HALFWAY]:new L("Halfway there",[{text:"Whooooa we're halfway there whoooooa livin on software... click some more and we'll make it I swear..."}]),[x.SPEAK_TO_LENNOX]:new L("The Flashback",[{person:"Young Lennox",text:"Yessirma'am, it is indeed an ordinary type day in the ordinary present in which I do my EXTRAORDINARY RESEARCH. It sure is quiet and lonely doing research of the singularly unique type to which I am accustomed to doing. Maybe the radio will help motivate me to greater heights of genius..."},{person:"Narrator",text:"And then, as Young Lennox fiddled with the radio dial..."},{person:"Lennox",text:"(Speaking through the radio): Hello? Hello me, can you hear me?"},{person:"Young Lennox",text:"What an interesting program. They must be experimenting with something more interactive."},{person:"Lennox",text:"No, you fool! I am speaking to you through the radio and, more importantly, through time!"},{person:"Young Lennox",text:"Inconceivable!"},{person:"Lennox",text:"Not so! Merely improbable! But time is short and you... I mean, I, must listen to me! Your research! You mustn't quit!"},{person:"Young Lennox",text:"I wasn't planning on it!"},{person:"Lennox",text:"Yes you are! In approximately three days you will lose most of your funding. But you must carry on! I am you from the future and I come with a dire warning... a quantum doomsday event is coming and I need your assistance to stop it... will you help me?"},{person:"Young Lennox",text:"As completely improbable, fantastical, and downright impossible as this all sounds... yes, I will help you... me. But if I continue my research, won't that change the trajectory of my future?"},{person:"Lennox",text:"..."},{person:"Young Lennox",text:"..."},{person:"Lennox",text:"...let's not overthink this. Just carry on with your research and forward me the data."},{person:"Young Lennox",text:"...how?"},{person:"Young Lennox",text:"I suppose, just bury it in my backyard and time will take its course!"},{person:"Young Lennox",text:"Of course!"}]),[x.UNLOCK_SAMA]:new L("Breakthrough #2",[{person:"Lennox",text:"Younger me! I am once again contacting you through the science of quantum radio! Have you made any breakthroughs, perchance?"},{person:"Young Lennox",text:"As a matter of fact, I have! But you may not fancy the conclusion. My research has led me to conclude that only an immortal will be able to withstand the rigors necessary to save us from our time crisis. Once they are created, being immortal, they should be able to move through time normally to your present (my future) and save us from the Doomsminute Event. However, they will require a special chamber through which to manipulate the quantum mechanics - that is..."},{person:"Lennox",text:"You don't mean...?"},{person:"Young Lennox",text:"I do."},{person:"Lennox",text:"A crystal sarcophagus! I always said it couldn't be done - and now, it must! Well, improbable as this may be, it is not an impossible task\u2026I daresay I *do* fancy the challenge, my young self!"},{person:"Young Lennox",text:"But there is more, my wrinkled replica. In order to create this immortal, I must do more than stretch mere telomeres. Only one body of study from the ancient past, long forgotten, can solve a mystery for us and provide a key ingredient: a Philosopher's Stone!"},{person:"Lennox",text:"Then I know what I must do."}]),[x.SPEAK_TO_SAMA]:new L("Enter the Alchemist.",[{person:"Narrator",text:"Using a Quantum Computer, Lennox sends an image even further back in time - to the golden age of alchemy."},{person:"Lennox",text:"Can you hear me, oh great scientist?"},{person:"Sama",text:"I can *see* you! What is this strange projection before me? Surely I am not having a religious experience?"},{person:"Lennox",text:"That depends on how you feel about the heroics of saving the world. Sama. Great alchemist of a golden age - I beg your wisdom. You once sought a philosopher's stone but abandoned that research in favour of..."},{person:"Sama",text:"I have abandoned nothing!"},{person:"Lennox",text:"But you will! Hear me, for although time is abundant for you, for me it is precious and brief. I beg you not to abandon your studies. An experiment of mine has caused time to SKEW into a tangent... time itself is about to end. We need a philosopher's stone if we are ever to solve this problem, and only YOU can build one. And\u2026bury it somewhere that only I can find it."},{person:"Sama",text:"...I'm gonna need a bigger workshop. What do I get out of this?"},{person:"Lennox",text:"...massive prestige long after you're dead?"}]),[x.UNLOCK_ITOTIA]:new L("Mathematical!",[{person:"Lennox",text:"How is progress, my medieval compatriot?"},{person:"Sama",text:"Medieval? What does that even mean...?"},{person:"Lennox",text:"...never mind."},{person:"Sama",text:"You are a strange apparition. Progress continues but I have encountered a problem. The stone must be... configured."},{person:"Lennox",text:"Configured how?"},{person:"Sama",text:"Mathematically. Surely in your advanced time you can find a way."},{person:"Lennox",text:"Or I could make the logical choice, and contact the greatest mathematicians ever!"},{text:"And so..."},{person:"Lennox",text:"...so will you help me, ancient Mayan?"},{person:"Itotia",text:"My name is Itotia. And yes. I will help you, even though your civilization is ending in 28 years."},{person:"Lennox",text:"I just told you - it's ending far sooner!"},{person:"Itotia",text:"Not according to *our* calendars..."}]),[x.UNLOCK_NECHTAN]:new L("The Final Countdown",[{person:"Itotia",text:"The calculation is almost complete, Lennox. Now we must look to the stars."},{person:"Lennox",text:"What do the stars have to..."},{person:"Itotia",text:"You future people spend too much time looking inward and not enough time looking up. Stop questioning everything."},{person:"Lennox",text:"Like the lack of language barrier?"},{person:"Itotia",text:"Exactly. Neither should you question the need to create a massive series of stone pillars, to align the energy of the stars. My calculations point to this - it will be needed or the math will mean nothing. But we lack the resources to complete this. Surely in your time, massive stones are aplenty."},{person:"Lennox",text:"An alignment of stone pillars, you say?. I know just the civilization..."},{text:"And so..."},{person:"Lennox",text:"...so that's what I need from your people, Nechtan. What do you say?"},{person:"Nechtan",text:"I say we're gonna need a bigger boat. For the stones... y'know."}]),[x.SUCCESS]:new L("Device Completion",[{text:"And so, as the last stone rises on the ancient plain, Nechtan records the alignment of the stars and inscribes the information on a cavern wall..."},{text:"...solving the final riddle of Itotia's calculation, which is recorded on a calendar..."},{text:"...which Sama then uses to configure the philosopher's stone, which is buried in a box..."},{text:"...dug up by Young Lennox's archaeology team and fed to the volunteer Omegaperson..."},{text:"...who, in 1984, steps into the Crystal Sarcophagus in order to solve the TIME PARADOX! Congratulations, There Is Time Now!..."}],Ze,"#FFDC00"),[x.FAILURE]:new L("Failure",[{text:`As you watch the final seconds of the clock run out and drain the last drops of your whiskey, listening to the final throes of the undergrad's desperate bacchanal, you wonder: "did I not click things quickly enough?"`},{text:"#outatime"}],ze,"#FF4136"),[t.PHYSICS]:new L("Unlocked Physics",[{text:"The particulars of particles."}]),[t.QUANTUM_COMPUTING]:new L("Unlocked Quantum Computing",[{text:"The study of how to use phenomena in quantum physics to create new ways of computing."}]),[t.QUANTUM_COMPUTER]:new L("Unlocked Quantum Computer",[{text:"You've made a quantum leap in the field of computing!"}]),[t.CHRONOCRYSTALS]:new L("Unlocked Chronocrystals",[{text:"I'm sure in 2022 time crystals are available in every corner drug store, but in 1984 they're a little hard to come by."}]),[t.BIOLOGY]:new L("Unlocked Biology",[{text:"The study of living stuff, and stuff."}]),[t.GENETIC_MEMORY]:new L("Unlocked Genetic Memory",[{text:"Remember the memories."}]),[t.TELOMERE_STRETCHER]:new L("Unlocked Telomere Stretcher",[{text:"It's a bit of a stretch, but you believe that prolonging a lifespan might be related to lengthening time."}]),[t.THE_FLUID]:new L("Unlocked The Fluid",[{text:"The Fluid! Lennox, I must have the Fluid!"}]),[t.ALCHEMY]:new L("Unlocked Alchemy",[{text:"Sure it seems like a romantic pastime, but it's mostly mercury poisoning when you get down to it."}]),[t.CHRONOMOGRIFICATION]:new L("Unlocked Chronomogrification",[{text:"You can transmogrify and now you can chronomogrify, but can you ever just mogrify?"}]),[t.DISTILLER]:new L("Unlocked Distiller",[{text:"I know you're tempted, but this is for science, not hooch."}]),[t.ELEMENT_ZERO]:new L("Unlocked Element Zero",[{text:"Is this trademarked?"}]),[t.MATHEMATICS]:new L("Unlocked Mathematics",[{text:"The purest of the sciences, except for economics."}]),[t.TIMELESS_ALGEBRA]:new L("Unlocked Timeless Algebra",[{text:"Classic."}]),[t.NEPOHUALTZINTZIN]:new L("Unlocked Nepohuatlzintzin",[{text:"Eat your heart out, abacus."}]),[t.OBSIDIAN]:new L("Unlocked Obsidian",[{text:"Coal's sexier cousin."}]),[t.ASTRONOMY]:new L("Unlocked Astronomy",[{text:"Astronomy compels the soul to look upward, and...oh sorry, wrong game."}]),[t.AETHERIC_HOROSCOPES]:new L("Unlocked Aetheric Horoscopes",[{text:"Astronomy, astrology...what's the difference?"}]),[t.ZODIAC_TALISMAN]:new L("Unlocked Zodiac Talisman",[{text:"Comes in 12 varieties."}]),[t.SARSEN_STONES]:new L("Unlocked Sarsen Stones",[{text:'90% sandstone, 10% "how the heck did they move those massive things?"'}]),[t.CRYSTAL_SARCOPHAGUS]:new L("Unlocked Crystal Sarcophagus",[{text:"The final stage of the DEVICE. Why a sarcophagus? Because 'Crystal Crypt' doesn't roll off the tongue."}]),[t.OMEGAPERSON]:new L("Unlocked Omegaperson",[{text:"Not the Charlton Heston version."}]),[t.PHILOSOPHERS_STONE]:new L("Unlocked Philosopher's Stone",[{text:"Definitely not a Sorcerer's Stone. That's not even a real thing."}]),[t.TZOLKIN]:new L("Unlocked Tzolk'in",[{text:'"The division of days." Whatever you do, do NOT divide them by zero.'}]),[t.TIMEHENGE]:new L("Unlocked Timehenge",[{text:"The name says it all."}])},xo=G(!1);function Le(){const e=je(),{personList:n}=re(),{pause:o,unpause:a}=et(),{timeElapsed:r}=me(),_=p=>{o();const A=p.icon?p.icon:ue,I=p.color?{color:p.color}:{};e.create({title:p.title,content:()=>$(we,{messageList:[p]}),icon:()=>$(J,I,{default:()=>$(A)}),maskClosable:!1,closable:!1,positiveText:"OK!",onPositiveClick:a})},u=p=>{o(),e.create({title:"Unlocked Multiple",content:()=>$(we,{messageList:p,displayMessageTitle:!0}),icon:()=>$(J,null,{default:()=>$(ue)}),maskClosable:!1,closable:!1,positiveText:"OK!",onPositiveClick:a})},m=(p,A,I)=>{const w=new Date(A,0);w.setDate(w.getDate()+I.value),p.timestamp=w.toISOString().split("T")[0],p.timestamp=p.timestamp.replace("1900-","2524 BC ")},d=()=>O(W[x.INTRO],[l.LENNOX_OLD]),T=p=>{const A=new Array;p.forEach(I=>{const w=W[I.research.key];w.wasSent=!0,w.icon=I.research.icon,w.color=I.research.color;const F=I.person;m(w,F.year,r),F.messageList.unshift(w),A.push(w)}),u(A)},v=(p,A)=>{const I=W[p.key];I.wasSent=!0,I.icon=p.icon,I.color=p.color,_(I),m(I,A.year,r),A.messageList.unshift(I)},O=(p,A)=>{p.wasSent=!0,_(p),A.forEach(I=>{const w=Ne({},p),F=n[I];m(w,F.year,r),F.messageList.unshift(w)})};return{sendInitialMessage:d,sendNarrativeMessage:O,sendUnlockMessage:v,sendUnlockMessages:T,showTimeline:xo}}class Ho{constructor(n,o,a,r,_,u,m,d,T,v,O,p,A,I){E(this,"currency");E(this,"sellFeatureEnabled");E(this,"gameStarted");E(this,"gameWon");E(this,"gameEnded");E(this,"countdownTriggered");E(this,"countdownSecondsLeft");E(this,"countupSecondsPassed");E(this,"expandConstant");E(this,"slowdownEnabled");E(this,"spokeToLennox");E(this,"spokeToSama");E(this,"people");E(this,"researches");this.currency=n,this.sellFeatureEnabled=o,this.gameStarted=a,this.gameWon=r,this.gameEnded=_,this.countdownTriggered=u,this.countdownSecondsLeft=m,this.countupSecondsPassed=d,this.expandConstant=T,this.slowdownEnabled=v,this.spokeToLennox=O,this.spokeToSama=p,this.people=A,this.researches=I}}class Go{constructor(n,o,a,r){E(this,"key");E(this,"timestamp");E(this,"isRead");E(this,"wasSent");this.key=n,this.timestamp=o,this.isRead=a,this.wasSent=r}}class Po{constructor(n,o,a){E(this,"key");E(this,"isUnlocked");E(this,"messageList");this.key=n,this.isUnlocked=o,this.messageList=a}}class Do{constructor(n,o,a,r,_){E(this,"key");E(this,"isUnlocked");E(this,"total");E(this,"current");E(this,"numWorkers");this.key=n,this.isUnlocked=o,this.total=a,this.current=r,this.numWorkers=_}}ae.exports.config({name:ie.DB_NAME});function Ue(){const{currency:e}=Re(),{countdownTriggered:n,currentPerson:o,gameEnded:a,gameStarted:r,gameWon:_,isLoading:u,sellFeatureEnabled:m,slowdownEnabled:d,spokeToLennox:T,spokeToSama:v}=K(),{personList:O,researchList:p}=re(),{countdownTimer:A,countupTimer:I,expandConstant:w}=me(),F=()=>(console.log(`clearing game state in ${ae.exports.driver()}`),ae.exports.setItem(ve.GAME_STATE,null).then(function(){Object.values(O).forEach(y=>{y.key!=l.LENNOX_OLD&&(y.isUnlocked=!1),y.messageList=[]}),Object.keys(p).forEach(y=>{const q=p[y];y!=t.PHYSICS&&(q.isUnlocked=!1),q.total=0,q.current=0,q.numWorkers=0}),e.value=0,m.value=!1,r.value=!0,_.value=!1,a.value=!1,n.value=!1,w.value=ie.INITIAL_EXPANSION_CONSTANT,d.value=!1,T.value=!1,v.value=!1,A.restart(ie.INITIAL_TIME),A.stop(),I.restart(0),o.value=l.LENNOX_OLD}).catch(function(y){console.log(`Error saving game state: ${y}`)})),b=()=>{const y=new Array;Object.values(O).forEach(z=>{const V=new Array;z.messageList.forEach(Q=>{const he=Object.keys(W).find(rt=>W[rt].title===Q.title);V.push(new Go(he,Q.timestamp,Q.isRead,Q.wasSent))});const te=new Po(z.key,z.isUnlocked,V);y.push(te)});const q=new Array;return Object.keys(p).forEach(z=>{const V=p[z],te=new Do(z,V.isUnlocked,V.total,V.current,V.numWorkers);q.push(te)}),new Ho(e.value,m.value,r.value,_.value,a.value,n.value,A.secondsLeft(),I.secondsElapsed(),w.value,d.value,T.value,v.value,y,q)},P=()=>{if(console.log(`saving to ${ae.exports.driver()}`),u.value){console.log("busy loading, will skip saving");return}return ae.exports.setItem(ve.GAME_STATE,b()).catch(function(y){console.log(`Error saving game state: ${y}`)})},X=y=>{y.people.forEach(q=>{const z=O[q.key];z.isUnlocked=q.isUnlocked;const V=new Array;q.messageList.forEach(te=>{const Q=W[te.key],he=p[te.key];he&&(Q.icon=he.icon,Q.color=he.color),Q.isRead=te.isRead,Q.wasSent=te.wasSent,Q.timestamp=te.timestamp,V.push(Q)}),z.messageList=V}),y.researches.forEach(q=>{const z=p[q.key];z.isUnlocked=q.isUnlocked,z.total=q.total,z.current=q.current,z.numWorkers=q.numWorkers}),e.value=y.currency,m.value=y.sellFeatureEnabled,r.value=y.gameStarted,_.value=y.gameWon,a.value=y.gameEnded,n.value=y.countdownTriggered,I.restart(y.countupSecondsPassed),d.value=y.slowdownEnabled,T.value=y.spokeToLennox,v.value=y.spokeToSama,n.value&&(w.value=y.expandConstant,a.value||A.restart(y.countdownSecondsLeft),I.stop())},ee=()=>(console.log(`loading from ${ae.exports.driver()}`),u.value=!0,ae.exports.getItem(ve.GAME_STATE).then(function(y){if(!y){u.value=!1,console.log("didn't end up loading");return}X(y),u.value=!1,console.log("done loading")}).catch(function(y){u.value=!1,console.log(`Error loading game state: ${y}`)}));return{clearGameState:F,exportGameState:()=>btoa(encodeURIComponent(JSON.stringify(b()))),importGameState:y=>{console.log("import game state");try{return X(JSON.parse(decodeURIComponent(atob(y)))),!0}catch{return!1}},loadGameState:()=>ae.exports.ready().then(ee),saveGameState:P}}const Ie=G(!1),Ae=G("Light Mode");function tt(){const{researchList:e}=re();return{otherThemeName:Ae,switchTheme:()=>{Ie.value?(Ie.value=!1,Ae.value="Light Mode",e[t.GENETIC_MEMORY].color="#FEFAE0",e[t.CHRONOMOGRIFICATION].color="#FFFFFF"):(Ie.value=!0,Ae.value="Dark Mode",e[t.GENETIC_MEMORY].color="#826107",e[t.CHRONOMOGRIFICATION].color="#363431")},lightMode:Ie}}const Yo=B({components:{AboutIcon:xe,DarkModeIcon:Gt,ExportIcon:He,ImportIcon:Ge,LightModeIcon:Pt,NButton:oe,NIcon:J,NSpace:se,NTooltip:Dt,PauseIcon:ke,RestartIcon:Pe,VersionIcon:De},setup(){const e=je(),{sendInitialMessage:n}=Le(),o=Qe(),{pause:a,unpause:r}=et(),{clearGameState:_,exportGameState:u,importGameState:m}=Ue(),{lightMode:d,switchTheme:T}=tt();return{about:()=>{a(),e.create({title:"About",content:()=>$(jn),icon:()=>$(xe),positiveText:"Neat",onPositiveClick:r,onMaskClick:r,onClose:r})},exportGame:()=>{a();const b=G(""),P=e.create({title:"Export Game",content:()=>$(to,{exportMessage:b,exportString:u(),onCopyToClipboard:X=>{console.log(X),navigator.clipboard.writeText(X).then(()=>b.value="Copy successful!").catch(()=>b.value="Error copying to clipboard.")},onCloseExport:()=>{r(),P.destroy()}}),icon:()=>$(He),onMaskClick:r,onClose:r})},importGame:()=>{a();const b=G(!1),P=e.create({title:"Import Game",content:()=>$(lo,{importError:b,onCancelImport:()=>{r(),P.destroy()},onImportString:X=>{m(X.value)?(b.value=!1,P.destroy(),o.info("Successfully imported game.")):b.value=!0}}),icon:()=>$(Ge),onMaskClick:r,onClose:r})},lightMode:d,otherThemeName:()=>d.value?"Dark Mode":"Light Mode",pauseTime:()=>{a(),e.create({title:"Paused",content:"There was time now... to go to the bathroom.",icon:()=>$(ke),positiveText:"Back to it!",onPositiveClick:r,onMaskClick:r,onClose:r})},restart:()=>{a(),e.create({title:"Restart Game?",content:"You will lose all of your progress!",icon:()=>$(Pe),positiveText:"I'm going back to the start",negativeText:"Oops, never mind",onPositiveClick:()=>{_().then(n)},onNegativeClick:r,onMaskClick:r,onClose:r})},switchTheme:T,version:()=>{a(),e.create({title:"Version History",content:()=>$(Ao),icon:()=>$(De),positiveText:"Good to Know",onPositiveClick:r,onMaskClick:r,onClose:r})}}}}),Fo=g("span",null,"About",-1),Wo=g("span",null,"Version History",-1),Bo=g("span",null,"Pause",-1),qo=g("span",null,"Import",-1),Xo=g("span",null,"Export",-1),Zo=g("span",null,"Restart",-1);function zo(e,n,o,a,r,_){const u=c("about-icon"),m=c("n-icon"),d=c("n-button"),T=c("n-tooltip"),v=c("version-icon"),O=c("light-mode-icon"),p=c("dark-mode-icon"),A=c("pause-icon"),I=c("import-icon"),w=c("export-icon"),F=c("restart-icon"),b=c("n-space");return f(),S(b,{justify:"end",style:{padding:"5px"}},{default:s(()=>[i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[0]||(n[0]=P=>e.about())},{icon:s(()=>[i(m,null,{default:s(()=>[i(u)]),_:1})]),_:1})]),default:s(()=>[Fo]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[1]||(n[1]=P=>e.version())},{icon:s(()=>[i(m,null,{default:s(()=>[i(v)]),_:1})]),_:1})]),default:s(()=>[Wo]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:e.switchTheme},{icon:s(()=>[i(m,null,{default:s(()=>[e.lightMode?H("",!0):(f(),S(O,{key:0})),e.lightMode?(f(),S(p,{key:1})):H("",!0)]),_:1})]),_:1},8,["onClick"])]),default:s(()=>[g("span",null,R(e.otherThemeName()),1)]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[2]||(n[2]=P=>e.pauseTime())},{icon:s(()=>[i(m,null,{default:s(()=>[i(A)]),_:1})]),_:1})]),default:s(()=>[Bo]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[3]||(n[3]=P=>e.importGame())},{icon:s(()=>[i(m,null,{default:s(()=>[i(I)]),_:1})]),_:1})]),default:s(()=>[qo]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[4]||(n[4]=P=>e.exportGame())},{icon:s(()=>[i(m,null,{default:s(()=>[i(w)]),_:1})]),_:1})]),default:s(()=>[Xo]),_:1}),i(T,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(d,{strong:"",circle:"",onClick:n[5]||(n[5]=P=>e.restart())},{icon:s(()=>[i(m,null,{default:s(()=>[i(F)]),_:1})]),_:1})]),default:s(()=>[Zo]),_:1})]),_:1})}var jo=Y(Yo,[["render",zo]]);const Qo=B({components:{ConfettiExplosion:Yt,LostIcon:ze,NIcon:J,NPopover:Te,NSpace:se,NSpin:Ft,NStatistic:Wt,PauseIcon:ke,TimeIcon:ue,WonIcon:Ze},setup(){const{currency:e}=Re(),{confetti:n,countdownTriggered:o,gameEnded:a,gamePaused:r,gameWon:_,sellFeatureEnabled:u,slowdownEnabled:m}=K(),{personList:d}=re(),{countdownTimer:T,countupTimer:v,expandConstant:O,timeLeft:p}=me(),A=window.innerWidth>700?G("There Was Time Now"):G("TWTN"),I=Ee(()=>d[l.NECHTAN].isUnlocked?"title2524BC":d[l.ITOTIA].isUnlocked?"title374":d[l.SAMA].isUnlocked?"title904":d[l.LENNOX_YOUNG].isUnlocked?"title1934":"title1984"),w=Ee(()=>window.innerWidth>900?"titleTextBig":d[l.NECHTAN].isUnlocked?"titleText2524BC":d[l.ITOTIA].isUnlocked?"titleText374":d[l.SAMA].isUnlocked?"titleText904":d[l.LENNOX_YOUNG].isUnlocked?"titleText1934":"titleText1984");function F(){return O.value<100?O.value.toFixed(2):O.value.toFixed(0)}return{confetti:n,confettiHeight:window.innerHeight,confettiWidth:window.innerWidth,countdownTimer:T,countupTimer:v,countdownTriggered:o,currency:e,expandConstantFormatted:F,gameEnded:a,gamePaused:r,gameWon:_,sellFeatureEnabled:u,slowdownEnabled:m,timeLeft:p,titleFont:I,titleText:w,titleValue:A}}}),Ko=U(" 0 "),Vo={key:0},Jo={key:1};function es(e,n,o,a,r,_){const u=c("n-space"),m=c("ConfettiExplosion"),d=c("n-statistic"),T=c("n-popover"),v=c("time-icon"),O=c("n-icon"),p=c("n-spin"),A=c("pause-icon"),I=c("lost-icon"),w=c("won-icon");return f(),S(u,{justify:"space-between",class:"twtnHeader"},{default:s(()=>[i(u,{style:{"padding-left":"5px"},width:"100%"},{default:s(()=>[g("span",{class:Bt([e.titleText,e.titleFont])},R(e.titleValue),3)]),_:1}),e.confetti?(f(),S(m,{key:0,"particle-count":200,duration:5e3,"stage-height":e.confettiHeight,"stage-width":e.confettiWidth,colors:["#F72585","#B5179E","#4361EE","#4CC9F0"]},null,8,["stage-height","stage-width"])):H("",!0),i(u,{width:"209px"},{default:s(()=>[e.sellFeatureEnabled?(f(),S(d,{key:0,label:"Budget"},{default:s(()=>[U(R(e.currency),1)]),_:1})):H("",!0),e.slowdownEnabled&&!e.gameEnded?(f(),S(d,{key:1,label:"Time Expansion"},{default:s(()=>[U(R(e.expandConstantFormatted()),1)]),_:1})):H("",!0),i(T,{trigger:"hover","keep-alive-on-hover":!1},{trigger:s(()=>[g("div",null,[e.gameEnded?(f(),S(d,{key:0,label:"Days Left"},{default:s(()=>[Ko]),_:1})):e.countdownTriggered?(f(),S(d,{key:1,label:"Days Left"},{default:s(()=>[U(R(e.timeLeft),1)]),_:1})):H("",!0)])]),default:s(()=>[e.gameEnded?(f(),C("span",Jo,"Game is over!")):(f(),C("span",Vo,R(e.countdownTimer.realPeopleTimeLeft())+" Real People Time\u2122 left",1))]),_:1}),e.countdownTimer.isRunning()?(f(),S(p,{key:2,size:"large",style:{"vertical-align":"middle"}},{icon:s(()=>[i(O,null,{default:s(()=>[i(v)]),_:1})]),_:1})):H("",!0),e.gamePaused&&!e.gameEnded?(f(),S(O,{key:3,color:"#63e2b7",size:"40"},{default:s(()=>[i(A)]),_:1})):H("",!0),e.gameEnded&&!e.gameWon?(f(),S(O,{key:4,color:"#63e2b7",size:"40"},{default:s(()=>[i(I,{color:"#FF4136"})]),_:1})):H("",!0),e.gameEnded&&e.gameWon?(f(),S(O,{key:5,color:"#63e2b7",size:"40"},{default:s(()=>[i(w,{color:"#FFDC00"})]),_:1})):H("",!0)]),_:1})]),_:1})}var ts=Y(Qo,[["render",es],["__scopeId","data-v-61785cc4"]]);const ns=B({components:{NPopover:Te},props:{research:k},setup(e){const{currentPerson:n}=K();return{changeTab:()=>{n.value=e.research.personKey},messages:W,placement:()=>window.innerWidth>700?"right":"bottom"}}}),os=g("br",null,null,-1);function ss(e,n,o,a,r,_){const u=c("n-popover");return f(),S(u,{trigger:"hover",placement:e.placement(),style:{maxWidth:"200px"},"keep-alive-on-hover":!1},{trigger:s(()=>[g("div",{onClick:n[0]||(n[0]=m=>e.changeTab())},[U(R(e.research.label)+" ",1),g("strong",{style:de({color:e.research.color})},R(e.research.total),5)])]),default:s(()=>[g("div",null,[g("span",{style:de({color:e.research.color})},R(e.research.label),5),os,U(" "+R(e.messages[e.research.key].messageSections[0].text),1)])]),_:1},8,["placement"])}var nt=Y(ns,[["render",ss]]);function rs(){function e(n,o){return()=>$(J,{color:o},{default:()=>$(n)})}return{renderIcon:e}}function We(e){return()=>$(nt,{research:e})}const as=B({components:{NMenu:qt},props:{collapsed:{type:Boolean,required:!0}},setup(){const{personList:e,researchList:n}=re(),{renderIcon:o}=rs();return{sidebar:Ee(()=>{const r=[],_=Object.values(e).filter(T=>T.isUnlocked),u=[],m=[];_.forEach(T=>{const v=[];Object.values(n).filter(O=>O.isUnlocked&&!O.isDevice&&O.personKey==T.key).forEach(O=>v.push({label:We(O),key:O.label,icon:o(O.icon,O.color)})),Object.values(n).filter(O=>O.isUnlocked&&O.isDevice&&O.personKey==T.key).forEach(O=>u.push({label:We(O),key:O.label,icon:o(O.icon,O.color)})),m.push(v)});let d=0;return m.forEach(T=>{d>0&&T.length>0&&r.push({key:"divider-"+d,type:"divider"}),r.push(...T),d++}),u.length>0&&(r.push({key:"divider-device",type:"divider"}),r.push({key:"devices",label:"D E V I C E S"}),r.push({key:"divider-device2",type:"divider"}),r.push(...u)),r}),TGameSiderItem:nt}}});function is(e,n,o,a,r,_){const u=c("n-menu");return f(),S(u,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":32,"icon-size":32,options:e.sidebar},null,8,["collapsed","options"])}var ls=Y(as,[["render",is]]);const cs=B({components:{},props:{person:ne}});function us(e,n,o,a,r,_){return f(),C("span",{onClick:n[0]||(n[0]=u=>e.person.markRead())},R(e.person.name),1)}var ds=Y(cs,[["render",us]]);const ps=B({components:{NButton:oe,NH2:Xt,NIcon:J,NProgress:Ke,NSpace:se,TGameResearchButton:Je},props:{research:k},setup(){const{canIncrementResearch:e,incrementResearch:n}=le();return{canIncrementResearch:e,startResearch:_=>{if(e(_))return n(_)},displayText:()=>window.innerWidth>700,renderIcon:_=>()=>$(_)}}}),ms=U(" Start ");function hs(e,n,o,a,r,_){const u=c("n-icon"),m=c("n-h2"),d=c("n-button"),T=c("n-space"),v=c("n-progress");return f(),C("div",null,[i(T,{vertical:""},{default:s(()=>[i(T,null,{default:s(()=>[i(u,{color:e.research.color,size:"36"},{default:s(()=>[(f(),S(ye(e.renderIcon(e.research.icon))))]),_:1},8,["color"]),e.displayText()?(f(),S(m,{key:0,type:"info",style:de({color:e.research.color})},{default:s(()=>[U(R(e.research.label),1)]),_:1},8,["style"])):H("",!0),i(d,{color:e.research.color,disabled:!e.canIncrementResearch(e.research),ghost:"",round:"",onClick:n[0]||(n[0]=O=>e.startResearch(e.research))},{default:s(()=>[ms]),_:1},8,["color","disabled"])]),_:1}),i(v,{type:"line",percentage:e.research.current,height:24,"border-radius":4,"fill-border-radius":0,"indicator-placement":"inside-label",color:e.research.color},null,8,["percentage","color"])]),_:1})])}var _s=Y(ps,[["render",hs]]);const fs=B({props:{research:k,person:ne},setup(){const{sellFeatureEnabled:e,slowdownEnabled:n}=K(),{researchList:o}=re(),{canIncrementResearch:a}=le();return{canIncrementResearch:a,messages:W,paymentName:()=>"Bribing",researchList:o,sellFeatureEnabled:e,slowdownEnabled:n}}}),gs={key:0},Es=g("br",null,null,-1),Ts={key:0},Ns={key:1},Os=g("span",{style:{color:"#969696"}},"Needs: ",-1),Is={key:0},vs={key:1},ys={key:0},Ls=g("br",null,null,-1),Ss={key:1},bs=U(" Click on a button to start researching! "),As={key:0},ks=U(" Sell research to increase your budget."),ws=g("br",null,null,-1),Cs={key:1};function Rs(e,n,o,a,r,_){var u,m;return e.research!=null?(f(),C("div",gs,[g("span",{style:de({color:e.research.color})},R(e.research.label),5),Es,e.research.isDevice&&e.research.total==1?(f(),C("div",Ts," Complete! ")):(f(),C("div",Ns,[U(R((m=(u=e.messages[e.research.key])==null?void 0:u.messageSections[0])==null?void 0:m.text)+" ",1),(f(!0),C(ce,null,pe(e.research.researchRequirementList,d=>(f(),C("div",{key:d.researchKey},[Os,g("span",{style:de({color:e.researchList[d.researchKey].color})},[e.researchList[d.researchKey].isUnlocked?(f(),C("span",vs,R(d.quantity)+" "+R(e.researchList[d.researchKey].label),1)):(f(),C("span",Is,"???"))],4),e.research.expand!=1&&e.slowdownEnabled?(f(),C("span",ys,[Ls,g("em",null,"This will slow down time by "+R(e.research.expand)+"%",1)])):H("",!0)]))),128))]))])):(f(),C("div",Ss,[bs,e.sellFeatureEnabled?(f(),C("div",As,[ks,ws,U(R(e.paymentName())+" "+R(e.person.workerTitle)+" may speed up your research! ",1)])):H("",!0),e.slowdownEnabled?(f(),C("div",Cs," Some research may slow down time... ")):H("",!0)]))}var ot=Y(fs,[["render",Rs]]);const Ms=B({components:{NCard:Zt,NPopover:Te,TGameDeviceProgress:_s,TGameResearchNeeds:ot},props:{research:k}});function Us(e,n,o,a,r,_){const u=c("t-game-device-progress"),m=c("n-card"),d=c("t-game-research-needs"),T=c("n-popover");return f(),S(T,{style:{maxWidth:"200px"},trigger:"hover",placement:"top-start","keep-alive-on-hover":!1},{trigger:s(()=>[i(m,{style:{maxWidth:"620px"}},{default:s(()=>[i(u,{research:e.research},null,8,["research"])]),_:1})]),default:s(()=>[i(d,{research:e.research},null,8,["research"])]),_:1})}var $s=Y(Ms,[["render",Us]]);const xs=B({components:{NGrid:zt,NGridItem:jt,TGameDeviceCard:$s},props:{research:k},setup(){let{incrementResearch:e}=le();return{incrementResearch:e}}});function Hs(e,n,o,a,r,_){const u=c("t-game-device-card"),m=c("n-grid-item"),d=c("n-grid");return f(),S(d,{cols:1,responsive:"screen",style:{"padding-left":"20px","max-width":"75%"}},{default:s(()=>[i(m,null,{default:s(()=>[i(u,{research:e.research},null,8,["research"])]),_:1})]),_:1})}var Gs=Y(xs,[["render",Hs]]);const Ps=B({components:{NCollapseTransition:Qt,NIcon:J,NSpace:se,NSwitch:Kt,NTimeline:Vt,NTimelineItem:Jt},props:{person:ne},setup(){const{showTimeline:e}=Le();return{renderIcon:o=>o?$(o):$(ue),renderMessageContent:o=>$(we,{messageList:[o]}),showTimeline:e}}}),Ds=U(" Hide Timeline "),Ys=U(" Show Timeline ");function Fs(e,n,o,a,r,_){const u=c("n-switch"),m=c("n-icon"),d=c("n-timeline-item"),T=c("n-timeline"),v=c("n-collapse-transition"),O=c("n-space");return f(),S(O,{vertical:"",style:{padding:"20px"}},{default:s(()=>[i(u,{value:e.showTimeline,"onUpdate:value":n[0]||(n[0]=p=>e.showTimeline=p)},{checked:s(()=>[Ds]),unchecked:s(()=>[Ys]),_:1},8,["value"]),i(v,{show:e.showTimeline},{default:s(()=>[i(T,null,{default:s(()=>[(f(!0),C(ce,null,pe(e.person.messageList,p=>(f(),S(d,{key:p.title,title:p.title,content:e.renderMessageContent(p),color:p.color?p.color:"#63e2b7",time:p.timestamp},{icon:s(()=>[i(m,{size:"20"},{default:s(()=>[(f(),S(ye(e.renderIcon(p.icon))))]),_:2},1024)]),_:2},1032,["title","content","color","time"]))),128))]),_:1})]),_:1},8,["show"])]),_:1})}var Ws=Y(Ps,[["render",Fs]]);const Bs=B({components:{NButton:oe,NPopover:Te},props:{research:k},setup(){const{canSellResearch:e,incrementResearch:n,sellIncrement:o,sellResearch:a,sellResearchPrice:r}=le();return{canSellResearch:e,incrementResearch:n,sellIncrement:o,sellResearch:a,sellResearchPrice:r}}}),qs=U(" Sell ");function Xs(e,n,o,a,r,_){const u=c("n-button"),m=c("n-popover");return f(),S(m,{trigger:"hover",disabled:!e.canSellResearch(e.research,e.sellIncrement()),"keep-alive-on-hover":!1},{trigger:s(()=>[i(u,{disabled:!e.canSellResearch(e.research,e.sellIncrement()),onClick:n[0]||(n[0]=d=>e.sellResearch(e.research,e.sellIncrement()))},{default:s(()=>[qs]),_:1},8,["disabled"])]),default:s(()=>[g("span",null,"Sell "+R(e.research.label)+" for "+R(e.sellResearchPrice(e.research,e.sellIncrement())),1)]),_:1},8,["disabled"])}var Zs=Y(Bs,[["render",Xs]]);const zs=B({components:{MinusIcon:en,NButton:oe,NButtonGroup:tn,NIcon:J,NPopover:Te,PlusIcon:nn},props:{research:k},setup(){let{buyWorker:e,buyWorkerCost:n,canBuyWorker:o,canSellWorker:a,sellWorker:r,sellWorkerCost:_}=le();return{buyWorker:e,buyWorkerCost:n,canBuyWorker:o,canSellWorker:a,sellWorker:r,sellWorkerCost:_}}});function js(e,n,o,a,r,_){const u=c("minus-icon"),m=c("n-icon"),d=c("n-button"),T=c("n-popover"),v=c("plus-icon"),O=c("n-button-group");return f(),S(O,{size:"small"},{default:s(()=>[i(T,{trigger:"hover",disabled:!e.canSellWorker(e.research),"keep-alive-on-hover":!1},{trigger:s(()=>[i(d,{round:"",disabled:!e.canSellWorker(e.research),onClick:n[0]||(n[0]=p=>e.sellWorker(e.research))},{icon:s(()=>[i(m,null,{default:s(()=>[i(u)]),_:1})]),_:1},8,["disabled"])]),default:s(()=>[g("span",null,"Sell worker for "+R(e.sellWorkerCost(e.research)),1)]),_:1},8,["disabled"]),i(d,{style:{width:"40px"}},{default:s(()=>[U(R(e.research.numWorkers),1)]),_:1}),i(T,{trigger:"hover",disabled:!e.canBuyWorker(e.research),"keep-alive-on-hover":!1},{trigger:s(()=>[i(d,{round:"",disabled:!e.canBuyWorker(e.research),onClick:n[1]||(n[1]=p=>e.buyWorker(e.research))},{icon:s(()=>[i(m,null,{default:s(()=>[i(v)]),_:1})]),_:1},8,["disabled"])]),default:s(()=>[g("span",null,"Buy worker for "+R(e.buyWorkerCost(e.research)),1)]),_:1},8,["disabled"])]),_:1})}var Qs=Y(zs,[["render",js]]);const Ks=B({components:{BuildIcon:on,NButton:oe,NIcon:J,NProgress:Ke,NScrollbar:sn,NSpace:se,NTable:rn,TGameResearchNeeds:ot,TGameResearchSell:Zs,TGameResearchWorkers:Qs},props:{researchList:{type:Array,required:!0},person:ne},setup(){const{sellFeatureEnabled:e}=K(),{canIncrementResearch:n,changeSellIncrement:o,incrementResearch:a,sellIncrement:r}=le(),_=G(null),u={width:window.innerWidth>700||!e.value?"205px":"36px"},m={maxWidth:"205px",height:e.value?"125px":"150px",wordWrap:"break-word"};return{currentResearch:_,canIncrementResearch:n,changeSellIncrement:o,extraStyle:m,sellFeatureEnabled:e,sellIncrement:r,incrementResearch:a,messages:W,tableStyle:u}}}),Vs=g("th",{style:{"text-align":"center"},scope:"col"}," Research ",-1),Js={key:0,style:{"text-align":"center"},scope:"col"},er={key:1,style:{"text-align":"center"},scope:"col"},tr=["onMouseover"],nr={key:0},or={key:1},sr=["colspan"];function rr(e,n,o,a,r,_){const u=c("build-icon"),m=c("n-icon"),d=c("n-progress"),T=c("n-button"),v=c("t-game-research-button"),O=c("t-game-research-sell"),p=c("t-game-research-workers"),A=c("t-game-research-needs"),I=c("n-table"),w=c("n-scrollbar"),F=c("n-space");return f(),S(F,{horizontal:""},{default:s(()=>[i(d,{type:"multiple-circle",percentage:e.researchList.slice().reverse().filter(b=>b.isUnlocked).map(({current:b})=>b),color:e.researchList.slice().reverse().filter(b=>b.isUnlocked).map(({color:b})=>b)},{default:s(()=>[i(m,{size:"40"},{default:s(()=>[i(u)]),_:1})]),_:1},8,["percentage","color"]),i(F,{vertical:""},{default:s(()=>[i(w,{"x-scrollable":""},{default:s(()=>[i(I,{bordered:!1,"single-line":!0,"single-column":!0,size:"small",style:de(e.tableStyle)},{default:s(()=>[g("thead",null,[g("tr",null,[Vs,e.sellFeatureEnabled?(f(),C("th",Js,[i(T,{size:"tiny",onClick:n[0]||(n[0]=b=>e.changeSellIncrement())},{default:s(()=>[U(" \xD7"+R(e.sellIncrement()),1)]),_:1})])):H("",!0),e.sellFeatureEnabled?(f(),C("th",er,R(e.person.workerTitle),1)):H("",!0)])]),g("tbody",null,[(f(!0),C(ce,null,pe(e.researchList.filter(b=>b.isUnlocked),b=>(f(),C("tr",{key:b.label},[g("td",{onMouseover:P=>e.currentResearch=b,onMouseleave:n[1]||(n[1]=P=>e.currentResearch=null)},[i(v,{research:b},null,8,["research"])],40,tr),e.sellFeatureEnabled?(f(),C("td",nr,[i(O,{research:b},null,8,["research"])])):H("",!0),e.sellFeatureEnabled?(f(),C("td",or,[i(p,{research:b},null,8,["research"])])):H("",!0)]))),128))]),g("tfoot",null,[g("tr",null,[g("td",{style:de(e.extraStyle),colspan:e.sellFeatureEnabled?3:1},[i(A,{research:e.currentResearch,person:e.person},null,8,["research","person"])],12,sr)])])]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var ar=Y(Ks,[["render",rr]]);function ir(e,n,o){return()=>$(ds,{person:e,name:n,numUnread:o})}const lr=B({components:{NTabs:an,NTabPane:ln,NSpace:se,TGameDevice:Gs,TGameTimeline:Ws,TGameResearch:ar},setup(){let{countdownTriggered:e,currentPerson:n}=K(),{personList:o,researchList:a}=re();function r(u){return Object.values(a).filter(m=>m.isUnlocked&&!m.isDevice&&m.personKey==u.key)}function _(u){return Object.values(a).find(m=>m.isUnlocked&&m.isDevice&&m.personKey==u.key)}return{countdownTriggered:e,currentPerson:n,personList:o,renderTab:ir,unlockedDevice:_,unlockedResearchList:r}}});function cr(e,n,o,a,r,_){const u=c("t-game-research"),m=c("n-space"),d=c("t-game-device"),T=c("t-game-timeline"),v=c("n-tab-pane"),O=c("n-tabs");return f(),S(O,{value:e.currentPerson,"onUpdate:value":n[0]||(n[0]=p=>e.currentPerson=p),type:"card"},{default:s(()=>[(f(!0),C(ce,null,pe(Object.values(e.personList).filter(p=>p.isUnlocked),p=>(f(),S(v,{key:p.key,name:p.key,tab:e.renderTab(p)},{default:s(()=>[i(m,{style:{padding:"20px"}},{default:s(()=>[e.unlockedResearchList(p).length>0?(f(),S(u,{key:0,person:p,"research-list":e.unlockedResearchList(p)},null,8,["person","research-list"])):H("",!0)]),_:2},1024),e.unlockedDevice(p)?(f(),S(d,{key:0,research:e.unlockedDevice(p)},null,8,["research"])):H("",!0),e.countdownTriggered?(f(),S(T,{key:1,person:p},null,8,["person"])):H("",!0)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])}var ur=Y(lr,[["render",cr]]);function dr(){const{personList:e,researchList:n,unlockableList:o}=re(),{sendNarrativeMessage:a,sendUnlockMessage:r,sendUnlockMessages:_}=Le(),{countdownTimer:u,countupTimer:m}=me(),{confetti:d,countdownTriggered:T,gameEnded:v,gameWon:O,isLoading:p,sellFeatureEnabled:A,slowdownEnabled:I,spokeToLennox:w,spokeToSama:F}=K();j(()=>{!T.value&&n[t.QUANTUM_COMPUTER].total>=1&&!p.value&&(T.value=!0,u.start(),m.stop(),a(W[x.UNLOCK_COUNTDOWN],[l.LENNOX_OLD]))}),j(()=>{!A.value&&n[t.QUANTUM_COMPUTER].total>=5&&!p.value&&(A.value=!0,a(W[x.UNLOCK_WORKERS],[l.LENNOX_OLD]))}),j(()=>{!I.value&&Object.values(n).find(b=>b.numWorkers>0)&&(I.value=!0,a(W[x.UNLOCK_SLOWDOWN],[l.LENNOX_OLD]))}),j(()=>{!e[l.LENNOX_YOUNG].isUnlocked&&n[t.QUANTUM_COMPUTER].total>=10&&I.value&&(e[l.LENNOX_YOUNG].isUnlocked=!0,n[t.BIOLOGY].isUnlocked=!0,r(n[t.BIOLOGY],e[l.LENNOX_YOUNG]),a(W[x.UNLOCK_YOUNG_LENNOX],[l.LENNOX_OLD]))}),j(()=>{!w.value&&n[t.BIOLOGY].total>=5&&!p.value&&(w.value=!0,a(W[x.SPEAK_TO_LENNOX],[l.LENNOX_OLD,l.LENNOX_YOUNG]))}),j(()=>{!e[l.SAMA].isUnlocked&&n[t.TELOMERE_STRETCHER].total>=1&&!p.value&&(e[l.SAMA].isUnlocked=!0,n[t.ALCHEMY].isUnlocked=!0,n[t.CRYSTAL_SARCOPHAGUS].isUnlocked=!0,n[t.CHRONOCRYSTALS].isUnlocked=!0,n[t.OMEGAPERSON].isUnlocked=!0,n[t.THE_FLUID].isUnlocked=!0,_([{research:n[t.ALCHEMY],person:e[l.SAMA]},{research:n[t.THE_FLUID],person:e[l.LENNOX_YOUNG]},{research:n[t.OMEGAPERSON],person:e[l.LENNOX_YOUNG]},{research:n[t.CHRONOCRYSTALS],person:e[l.LENNOX_OLD]},{research:n[t.CRYSTAL_SARCOPHAGUS],person:e[l.LENNOX_OLD]}]),a(W[x.UNLOCK_SAMA],[l.LENNOX_OLD]))}),j(()=>{!F.value&&n[t.ALCHEMY].total>=5&&!p.value&&(F.value=!0,a(W[x.SPEAK_TO_SAMA],[l.LENNOX_OLD,l.SAMA]))}),j(()=>{!e[l.ITOTIA].isUnlocked&&n[t.DISTILLER].total>=1&&!p.value&&(e[l.ITOTIA].isUnlocked=!0,n[t.MATHEMATICS].isUnlocked=!0,n[t.PHILOSOPHERS_STONE].isUnlocked=!0,n[t.ELEMENT_ZERO].isUnlocked=!0,_([{research:n[t.MATHEMATICS],person:e[l.ITOTIA]},{research:n[t.ELEMENT_ZERO],person:e[l.SAMA]},{research:n[t.PHILOSOPHERS_STONE],person:e[l.SAMA]}]),a(W[x.UNLOCK_ITOTIA],[l.LENNOX_OLD,l.ITOTIA]))}),j(()=>{!e[l.NECHTAN].isUnlocked&&n[t.NEPOHUALTZINTZIN].total>=1&&!p.value&&(e[l.NECHTAN].isUnlocked=!0,n[t.ASTRONOMY].isUnlocked=!0,n[t.TZOLKIN].isUnlocked=!0,n[t.OBSIDIAN].isUnlocked=!0,_([{research:n[t.ASTRONOMY],person:e[l.NECHTAN]},{research:n[t.OBSIDIAN],person:e[l.ITOTIA]},{research:n[t.TZOLKIN],person:e[l.ITOTIA]}]),a(W[x.UNLOCK_NECHTAN],[l.LENNOX_OLD,l.ITOTIA,l.NECHTAN]))}),j(()=>{if(p.value)return;const b=n[t.CRYSTAL_SARCOPHAGUS];!v.value&&b.total>0&&(u.stop(),v.value=!0,O.value=!0,d.value=!0,a(W[x.SUCCESS],[l.LENNOX_OLD,l.LENNOX_YOUNG,l.SAMA,l.ITOTIA,l.NECHTAN]))}),j(async()=>{!v.value&&u.isExpired()&&!p.value&&(v.value=!0,O.value=!1,a(W[x.FAILURE],[l.LENNOX_OLD,l.LENNOX_YOUNG,l.SAMA,l.ITOTIA,l.NECHTAN]))}),j(()=>{if(!p.value)for(const b in o){const P=o[b];let X=null;if(P instanceof k&&(X=e[P.personKey],!P.isUnlocked)){const ee=n[P.unlockedBy];if(ee){const Se=P.unlockThreshold;ee.total>=Se&&(P.isUnlocked=!0,r(P,X))}}}})}const pr={components:{NLayout:cn,NLayoutContent:un,NLayoutFooter:dn,NLayoutHeader:pn,NLayoutSider:mn,TGameFooter:jo,TGameHeader:ts,TGameSider:ls,TGameTabs:ur},setup(){const e=Qe(),{gamePaused:n,gameStarted:o,isLoading:a,saveStopwatch:r}=K(),{sendInitialMessage:_}=Le(),{startIncrements:u}=le(),{saveGameState:m}=Ue();let d=window.innerWidth<700;return o.value||(_(),o.value=!0),u(),dr(),setTimeout(function(){hn(r.seconds,()=>{r.seconds.value%ie.SAVE_INTERVAL===0&&!a.value&&!n.value&&m().then(e.success("Autosaved"))})},ie.SAVE_INTERVAL*1e3),{collapsed:G(d)}}};function mr(e,n,o,a,r,_){const u=c("t-game-header"),m=c("n-layout-header"),d=c("t-game-sider"),T=c("n-layout-sider"),v=c("t-game-tabs"),O=c("n-layout-content"),p=c("n-layout"),A=c("t-game-footer"),I=c("n-layout-footer");return f(),S(p,{position:"absolute","native-scrollbar":!1,"content-style":"height: 100%; display: flex; flex-direction: column"},{default:s(()=>[i(m,{bordered:"",style:{"padding-top":"5px"}},{default:s(()=>[i(u)]),_:1}),i(p,{"has-sider":""},{default:s(()=>[i(T,{bordered:"","show-trigger":"","collapse-mode":"width","collapsed-width":64,collapsed:a.collapsed,width:245,"native-scrollbar":!1,onCollapse:n[0]||(n[0]=w=>a.collapsed=!0),onExpand:n[1]||(n[1]=w=>a.collapsed=!1)},{default:s(()=>[i(d,{collapsed:a.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),i(O,null,{default:s(()=>[i(v)]),_:1})]),_:1}),i(I,{bordered:"",style:{"flex-shrink":"0"}},{default:s(()=>[i(A)]),_:1})]),_:1})}var hr=Y(pr,[["render",mr]]);const _r={name:"App",components:{NConfigProvider:_n,NDialogProvider:fn,NMessageProvider:gn,NNotificationProvider:En,TGame:hr},setup(){const{lightMode:e}=tt(),n=G(!1),{loadGameState:o}=Ue();return o().finally(function(){n.value=!0}),{enableGame:n,theme:()=>e.value?null:Tn}}};function fr(e,n,o,a,r,_){const u=c("t-game"),m=c("n-message-provider"),d=c("n-notification-provider"),T=c("n-dialog-provider"),v=c("n-config-provider");return f(),S(v,{theme:a.theme()},{default:s(()=>[i(T,null,{default:s(()=>[i(d,null,{default:s(()=>[i(m,null,{default:s(()=>[a.enableGame?(f(),S(u,{key:0})):H("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["theme"])}var gr=Y(_r,[["render",fr]]);const st=Nn(gr);st.component("TGameResearchButton",Je);st.mount("#app");
