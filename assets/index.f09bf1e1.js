var it=Object.defineProperty;var $e=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Ae=(e,n,o)=>n in e?it(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Oe=(e,n)=>{for(var o in n||(n={}))lt.call(n,o)&&Ae(e,o,n[o]);if($e)for(var o of $e(n))ct.call(n,o)&&Ae(e,o,n[o]);return e};var T=(e,n,o)=>(Ae(e,typeof n!="symbol"?n+"":n,o),o);import{r as x,u as He,a as ke,s as P,P as ut,Q as dt,b as pt,C as mt,c as ht,B as _t,G as ft,T as Et,d as Tt,O as gt,A as Nt,e as Ot,D as It,E as vt,f as yt,M as Lt,g as St,N as At,h as kt,i as wt,j as Ct,k as bt,Z as Rt,S as Mt,l as Ut,m as _e,n as $t,o as B,p as te,q as f,t as y,w as s,v as $,x as u,y as Ie,z as w,F as R,H as G,I as Ht,J as xe,K as ne,L as E,R as i,U,V as Ge,W as ue,X as V,Y as de,_ as me,$ as xt,a0 as Gt,a1 as Pe,a2 as De,a3 as Ye,a4 as ie,a5 as We,a6 as Pt,a7 as Fe,a8 as Be,a9 as Dt,aa as Yt,ab as Wt,ac as we,ad as qe,ae as Xe,af as Ze,ag as Ft,ah as Bt,ai as fe,aj as qt,ak as Xt,al as Zt,am as pe,an as zt,ao as jt,ap as Kt,aq as ze,ar as Qt,as as Vt,at as Jt,au as en,av as tn,aw as nn,ax as on,ay as sn,az as rn,aA as an,aB as ln,aC as cn,aD as un,aE as dn,aF as pn,aG as j,aH as mn,aI as hn,aJ as _n,aK as fn,aL as En,aM as Tn,aN as gn,aO as Nn}from"./vendor.0f43d909.js";const On=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const m of r)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function o(r){const m={};return r.integrity&&(m.integrity=r.integrity),r.referrerpolicy&&(m.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?m.credentials="include":r.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(r){if(r.ep)return;r.ep=!0;const m=o(r);fetch(r.href,m)}};On();var H;(function(e){e.INTRO="initial",e.UNLOCK_WORKERS="unlock-workers",e.UNLOCK_COUNTDOWN="unlock-countdown",e.UNLOCK_SLOWDOWN="unlock-slowdown",e.UNLOCK_YOUNG_LENNOX="unlock-young-lennox",e.HALFWAY="halfway",e.SPEAK_TO_LENNOX="speak-to-lennox",e.UNLOCK_SAMA="unlock-sama",e.SPEAK_TO_SAMA="speak-to-sama",e.UNLOCK_ITOTIA="unlock-itotia",e.UNLOCK_NECHTAN="unlock-nechtan",e.SUCCESS="success",e.FAILURE="failure"})(H||(H={}));var c;(function(e){e.LENNOX_OLD="lennox-old",e.LENNOX_YOUNG="lennox-young",e.SAMA="sama",e.ITOTIA="itotia",e.NECHTAN="nechtan"})(c||(c={}));var t;(function(e){e.PHYSICS="physics",e.QUANTUM_COMPUTING="quantum-computing",e.QUANTUM_COMPUTER="quantum-computer",e.CHRONOCRYSTALS="chronocrystals",e.BIOLOGY="biology",e.GENETIC_MEMORY="genetic-memory",e.TELOMERE_STRETCHER="telomere-stretcher",e.THE_FLUID="the-fluid",e.ALCHEMY="alchemy",e.CHRONOMOGRIFICATION="chronomogrification",e.DISTILLER="distiller",e.ELEMENT_ZERO="element-zero",e.MATHEMATICS="mathematics",e.TIMELESS_ALGEBRA="timeless-algebra",e.NEPOHUALTZINTZIN="nepohualtzintzin",e.OBSIDIAN="obsidian",e.ASTRONOMY="astronomy",e.AETHERIC_HOROSCOPES="aetheric-horoscopes",e.ZODIAC_TALISMAN="zodiac-talisman",e.SARSEN_STONES="sarsen-stones",e.CRYSTAL_SARCOPHAGUS="crystal-sarcophagus",e.OMEGAPERSON="omegaperson",e.PHILOSOPHERS_STONE="philosophers-stone",e.TZOLKIN="tzolkin",e.TIMEHENGE="timehenge"})(t||(t={}));var Ee;(function(e){e.GAME_STATE="gameState"})(Ee||(Ee={}));const In=x(!1),vn=x(!1),yn=x(!1),Ln=x(!1),Sn=x(!1),An=x(!0),kn=He(0,!0),wn=x(!1),Cn=x(!1),bn=x(!1),Rn=x(!1),Mn=x(c.LENNOX_OLD),Un=x(!1);function K(){return{confetti:Un,countdownTriggered:Sn,currentPerson:Mn,gameWon:yn,gameEnded:Ln,gamePaused:vn,gameStarted:In,isLoading:An,saveStopwatch:kn,sellFeatureEnabled:wn,slowdownEnabled:Cn,spokeToLennox:bn,spokeToSama:Rn}}const $n=x(0);function Ce(){return{currency:$n}}class je{constructor(){T(this,"isUnlocked",!1);T(this,"unlockedBy",null);T(this,"unlockThreshold",0)}setUnlock(n,o){this.unlockedBy=n,this.unlockThreshold=o}}class oe extends je{constructor(n,o,a,r){super();T(this,"key");T(this,"name");T(this,"year");T(this,"messageList",new Array);T(this,"workerTitle");this.key=n,this.name=o,this.year=a,this.workerTitle=r}numUnread(){let n=0;return this.messageList.forEach(o=>{o.isRead||n++}),n}markRead(){this.messageList.forEach(n=>{n.isRead=!0})}}class k extends je{constructor(n,o,a,r,m,d){super();T(this,"key");T(this,"label");T(this,"icon");T(this,"color");T(this,"isDevice");T(this,"personKey");T(this,"speed",10);T(this,"expand",1);T(this,"price",5);T(this,"workerCost",5);T(this,"total",0);T(this,"current",0);T(this,"isIncrementing",!1);T(this,"numWorkers",0);T(this,"researchRequirementList",new Array);this.key=n,this.label=o,this.icon=a,this.color=r,this.isDevice=m,this.personKey=d}setNumbers(n,o,a,r){this.speed=n,this.expand=o,this.price=a,this.workerCost=r}}class M{constructor(n,o){T(this,"researchKey");T(this,"quantity");this.researchKey=n,this.quantity=o}}const Te=ke({[c.LENNOX_OLD]:new oe(c.LENNOX_OLD,"Lennox (1984)",1984,"Undergrads"),[c.LENNOX_YOUNG]:new oe(c.LENNOX_YOUNG,"Lennox (1934)",1934,"Lab Partners"),[c.SAMA]:new oe(c.SAMA,"Sama (904)",904,"Research Assistants"),[c.ITOTIA]:new oe(c.ITOTIA,"Itotia (374)",374,"Numeric Priests"),[c.NECHTAN]:new oe(c.NECHTAN,"Nechtan (2524 BC)",0,"Druids")}),_=ke({[t.PHYSICS]:new k(t.PHYSICS,"Physics",P(ut),"#F72585",!1,c.LENNOX_OLD),[t.QUANTUM_COMPUTING]:new k(t.QUANTUM_COMPUTING,"Quantum Computing",P(dt),"#B5179E",!1,c.LENNOX_OLD),[t.QUANTUM_COMPUTER]:new k(t.QUANTUM_COMPUTER,"Quantum Computer",P(pt),"#4361EE",!1,c.LENNOX_OLD),[t.CHRONOCRYSTALS]:new k(t.CHRONOCRYSTALS,"Chronocrystals",P(mt),"#4CC9F0",!1,c.LENNOX_OLD),[t.CRYSTAL_SARCOPHAGUS]:new k(t.CRYSTAL_SARCOPHAGUS,"Crystal Sarcophagus",P(ht),"#e0c3fc",!0,c.LENNOX_OLD),[t.BIOLOGY]:new k(t.BIOLOGY,"Biology",P(_t),"#f4e285",!1,c.LENNOX_YOUNG),[t.GENETIC_MEMORY]:new k(t.GENETIC_MEMORY,"Genetic Memory",P(ft),"#FEFAE0",!1,c.LENNOX_YOUNG),[t.TELOMERE_STRETCHER]:new k(t.TELOMERE_STRETCHER,"Telomere Stretcher",P(Et),"#bc6c25",!1,c.LENNOX_YOUNG),[t.THE_FLUID]:new k(t.THE_FLUID,"The Fluid",P(Tt),"#606c38",!1,c.LENNOX_YOUNG),[t.OMEGAPERSON]:new k(t.OMEGAPERSON,"Omegaperson",P(gt),"#fb8500",!0,c.LENNOX_YOUNG),[t.ALCHEMY]:new k(t.ALCHEMY,"Alchemy",P(Nt),"#bfc0c0",!1,c.SAMA),[t.CHRONOMOGRIFICATION]:new k(t.CHRONOMOGRIFICATION,"Chronomogrification",P(Ot),"#FFFFFF",!1,c.SAMA),[t.DISTILLER]:new k(t.DISTILLER,"Distiller",P(It),"#EF8354",!1,c.SAMA),[t.ELEMENT_ZERO]:new k(t.ELEMENT_ZERO,"Element Zero",P(vt),"#4f5d75",!1,c.SAMA),[t.PHILOSOPHERS_STONE]:new k(t.PHILOSOPHERS_STONE,"Philosopher's Stone",P(yt),"#d4af37",!0,c.SAMA),[t.MATHEMATICS]:new k(t.MATHEMATICS,"Mathematics",P(Lt),"#48d7e7",!1,c.ITOTIA),[t.TIMELESS_ALGEBRA]:new k(t.TIMELESS_ALGEBRA,"Timeless Algebra",P(St),"#f168a7",!1,c.ITOTIA),[t.NEPOHUALTZINTZIN]:new k(t.NEPOHUALTZINTZIN,"Nepohualtzintzin",P(At),"#f1cbe6",!1,c.ITOTIA),[t.OBSIDIAN]:new k(t.OBSIDIAN,"Obsidian",P(kt),"#f9d567",!1,c.ITOTIA),[t.TZOLKIN]:new k(t.TZOLKIN,"Tzolk'in",P(wt),"#8cb369",!0,c.ITOTIA),[t.ASTRONOMY]:new k(t.ASTRONOMY,"Astronomy",P(Ct),"#2c7da0",!1,c.NECHTAN),[t.AETHERIC_HOROSCOPES]:new k(t.AETHERIC_HOROSCOPES,"Aetheric Horoscopes",P(bt),"#468faf",!1,c.NECHTAN),[t.ZODIAC_TALISMAN]:new k(t.ZODIAC_TALISMAN,"Zodiac Talisman",P(Rt),"#61a5c2",!1,c.NECHTAN),[t.SARSEN_STONES]:new k(t.SARSEN_STONES,"Sarsen Stones",P(Mt),"#89c2d9",!1,c.NECHTAN),[t.TIMEHENGE]:new k(t.TIMEHENGE,"Timehenge",P(Ut),"#a9d6e5",!0,c.NECHTAN)}),Hn=ke(Oe(Oe({},Te),_));function xn(){_[t.QUANTUM_COMPUTING].setUnlock(t.PHYSICS,10),_[t.QUANTUM_COMPUTER].setUnlock(t.QUANTUM_COMPUTING,10),_[t.GENETIC_MEMORY].setUnlock(t.BIOLOGY,13),_[t.TELOMERE_STRETCHER].setUnlock(t.GENETIC_MEMORY,13),_[t.CHRONOMOGRIFICATION].setUnlock(t.ALCHEMY,16),_[t.DISTILLER].setUnlock(t.CHRONOMOGRIFICATION,16),_[t.TIMELESS_ALGEBRA].setUnlock(t.MATHEMATICS,19),_[t.NEPOHUALTZINTZIN].setUnlock(t.TIMELESS_ALGEBRA,19),_[t.AETHERIC_HOROSCOPES].setUnlock(t.ASTRONOMY,22),_[t.ZODIAC_TALISMAN].setUnlock(t.AETHERIC_HOROSCOPES,22),_[t.SARSEN_STONES].setUnlock(t.ZODIAC_TALISMAN,22),_[t.TIMEHENGE].setUnlock(t.ZODIAC_TALISMAN,22)}function Gn(){_[t.QUANTUM_COMPUTING].researchRequirementList.push(new M(t.PHYSICS,1)),_[t.QUANTUM_COMPUTER].researchRequirementList.push(new M(t.QUANTUM_COMPUTING,2)),_[t.CHRONOCRYSTALS].researchRequirementList.push(new M(t.QUANTUM_COMPUTER,3)),_[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.CHRONOCRYSTALS,10)),_[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.OMEGAPERSON,1)),_[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.PHILOSOPHERS_STONE,1)),_[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.TZOLKIN,1)),_[t.CRYSTAL_SARCOPHAGUS].researchRequirementList.push(new M(t.TIMEHENGE,1)),_[t.GENETIC_MEMORY].researchRequirementList.push(new M(t.BIOLOGY,1)),_[t.TELOMERE_STRETCHER].researchRequirementList.push(new M(t.GENETIC_MEMORY,2)),_[t.THE_FLUID].researchRequirementList.push(new M(t.TELOMERE_STRETCHER,3)),_[t.OMEGAPERSON].researchRequirementList.push(new M(t.THE_FLUID,10)),_[t.OMEGAPERSON].researchRequirementList.push(new M(t.PHILOSOPHERS_STONE,1)),_[t.OMEGAPERSON].researchRequirementList.push(new M(t.TZOLKIN,1)),_[t.OMEGAPERSON].researchRequirementList.push(new M(t.TIMEHENGE,1)),_[t.CHRONOMOGRIFICATION].researchRequirementList.push(new M(t.ALCHEMY,1)),_[t.DISTILLER].researchRequirementList.push(new M(t.CHRONOMOGRIFICATION,2)),_[t.ELEMENT_ZERO].researchRequirementList.push(new M(t.DISTILLER,3)),_[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.ELEMENT_ZERO,10)),_[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.TZOLKIN,1)),_[t.PHILOSOPHERS_STONE].researchRequirementList.push(new M(t.TIMEHENGE,1)),_[t.TIMELESS_ALGEBRA].researchRequirementList.push(new M(t.MATHEMATICS,1)),_[t.NEPOHUALTZINTZIN].researchRequirementList.push(new M(t.TIMELESS_ALGEBRA,2)),_[t.OBSIDIAN].researchRequirementList.push(new M(t.NEPOHUALTZINTZIN,3)),_[t.TZOLKIN].researchRequirementList.push(new M(t.OBSIDIAN,10)),_[t.TZOLKIN].researchRequirementList.push(new M(t.TIMEHENGE,1)),_[t.AETHERIC_HOROSCOPES].researchRequirementList.push(new M(t.ASTRONOMY,1)),_[t.ZODIAC_TALISMAN].researchRequirementList.push(new M(t.AETHERIC_HOROSCOPES,2)),_[t.SARSEN_STONES].researchRequirementList.push(new M(t.ZODIAC_TALISMAN,3)),_[t.TIMEHENGE].researchRequirementList.push(new M(t.SARSEN_STONES,10))}function Pn(){_[t.PHYSICS].setNumbers(10,1,5,5),_[t.QUANTUM_COMPUTING].setNumbers(7.5,1,6,6),_[t.QUANTUM_COMPUTER].setNumbers(5,1.02,7,7),_[t.CHRONOCRYSTALS].setNumbers(.5,1,8,8),_[t.CRYSTAL_SARCOPHAGUS].setNumbers(.125,1,0,0),_[t.BIOLOGY].setNumbers(10,1,9,9),_[t.GENETIC_MEMORY].setNumbers(5,1,10,10),_[t.TELOMERE_STRETCHER].setNumbers(2.5,1.02,11,11),_[t.THE_FLUID].setNumbers(1,1,12,12),_[t.OMEGAPERSON].setNumbers(.125,1,0,0),_[t.ALCHEMY].setNumbers(10,1,13,13),_[t.CHRONOMOGRIFICATION].setNumbers(2.5,1,14,14),_[t.DISTILLER].setNumbers(1,1.02,15,15),_[t.ELEMENT_ZERO].setNumbers(.5,1,16,16),_[t.PHILOSOPHERS_STONE].setNumbers(.125,1,0,0),_[t.MATHEMATICS].setNumbers(10,1,17,17),_[t.TIMELESS_ALGEBRA].setNumbers(1,1,18,18),_[t.NEPOHUALTZINTZIN].setNumbers(.5,1.02,19,19),_[t.OBSIDIAN].setNumbers(.25,1,20,20),_[t.TZOLKIN].setNumbers(.125,1,0,0),_[t.ASTRONOMY].setNumbers(10,1,21,21),_[t.AETHERIC_HOROSCOPES].setNumbers(.5,1,22,22),_[t.ZODIAC_TALISMAN].setNumbers(.25,1.02,23,23),_[t.SARSEN_STONES].setNumbers(.1,1,24,24),_[t.TIMEHENGE].setNumbers(.125,1,0,0)}xn();Gn();Pn();function se(){_[t.PHYSICS].isUnlocked=!0,Te[c.LENNOX_OLD].isUnlocked=!0;const e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());if(n.UNLOCK_ALL==="true"){for(const o in Te)Te[o].isUnlocked=!0;for(const o in _)_[o].isUnlocked=!0,_[o].isDevice||(_[o].total=100)}if(n.QUICK_MODE==="true")for(const o in _)_[o].speed=100;return{personList:Te,researchList:_,unlockableList:Hn}}const le={INITIAL_TIME:300,INITIAL_EXPANSION_CONSTANT:1,NOTIFICATION_DURATION:1e4,SAVE_INTERVAL:30,DB_NAME:"There Was Time Now"};class Dn{constructor(){T(this,"stopwatch");this.stopwatch=He(0,!0)}restart(n){this.stopwatch.reset(n)}secondsElapsed(){return this.stopwatch.seconds.value+this.stopwatch.minutes.value*60+this.stopwatch.hours.value*3600+this.stopwatch.days.value*86400}start(){this.stopwatch.start()}stop(){this.stopwatch.pause()}}class Yn{constructor(){T(this,"timer");const n=new Date,o=n.getSeconds()+le.INITIAL_TIME;n.setSeconds(o),this.timer=$t(n.getTime(),!1)}resume(){this.timer.resume()}start(){this.timer.start()}restart(n){const o=new Date,a=o.getSeconds()+n;o.setSeconds(a),this.timer.restart(o.getTime(),!0)}stop(){this.timer.pause()}realPeopleTimeLeft(){const n=this.timer.days.value>0?" "+this.timer.days.value+" days":"",o=this.timer.hours.value>0?" "+this.timer.hours.value+" hours":"",a=this.timer.minutes.value>0?" "+this.timer.minutes.value+" minutes":"",r=this.timer.seconds.value>0?" "+this.timer.seconds.value+" seconds":"";return n+o+a+r}secondsLeft(){return this.timer.seconds.value+this.timer.minutes.value*60+this.timer.hours.value*3600+this.timer.days.value*86400}isExpired(){return this.timer.isExpired.value}isRunning(){return this.timer.isRunning.value}}const ge=new Yn,Ke=new Dn,Ne=x(le.INITIAL_EXPANSION_CONSTANT);function Wn(e){if(ge.isRunning()){if(Ne.value>=1e3){Ne.value=1e3;return}Ne.value*=e;const n=ge.secondsLeft(),o=new Date;o.setSeconds(o.getSeconds()+n*e),ge.restart(n*e)}}function he(){const e=_e(()=>{let o=le.INITIAL_TIME-n.value;return o+=Ke.secondsElapsed(),o}),n=_e(()=>{let o=ge.secondsLeft();return o/=Ne.value,Math.round(o)});return{countdownTimer:ge,countupTimer:Ke,expandConstant:Ne,expandTime:Wn,timeElapsed:e,timeLeft:n}}const Qe=[1,5,10],ve=x(0);function ce(){const{currency:e}=Ce(),{gamePaused:n,slowdownEnabled:o}=K(),{researchList:a}=se(),{expandTime:r}=he(),m=(g,Z)=>!(g.total<Z),d=(g,Z)=>Z*g.price,h=(g,Z)=>{g.total-=Z;const v=d(g,Z);e.value+=v},p=g=>e.value>=g.workerCost,N=g=>g.workerCost,O=g=>g.numWorkers>0,S=g=>g.workerCost,l=g=>{p(g)&&(g.numWorkers++,e.value-=g.workerCost,g.numWorkers==1&&Y(g))},C=g=>{O(g)&&(g.numWorkers--,e.value+=g.workerCost)},I=()=>{ve.value++,ve.value>Qe.length-1&&(ve.value=0)},b=()=>Qe[ve.value],D=g=>g.researchRequirementList.filter(Z=>a[Z.researchKey].total<Z.quantity).length==0,A=g=>{g.forEach(Z=>{a[Z.researchKey].total-=Z.quantity})},F=(g,Z)=>{if(g.isIncrementing)Z&&g.numWorkers>0&&setTimeout(()=>Y(g),J(g));else{g.isIncrementing=!0,g.isDevice||A(g.researchRequirementList);const v=setInterval(function(){n.value||(g.current+=g.speed*(1+g.numWorkers/50),g.current>=100&&(clearInterval(v),setTimeout(function(){g.isDevice||(g.current=0,g.isIncrementing=!1),g.total+=1,o.value&&r(g.expand)},200),Z&&g.numWorkers>0&&setTimeout(()=>Y(g),J(g))))},100)}},Y=g=>{g.numWorkers>0&&(D(g)?F(g,!0):setTimeout(()=>Y(g),J(g)))},J=g=>1e4/((g.numWorkers+2)/2);return{buyWorker:l,buyWorkerCost:N,canBuyWorker:p,canIncrementResearch:D,canSellResearch:m,canSellWorker:O,changeSellIncrement:I,incrementResearch:F,sellIncrement:b,sellResearch:h,sellResearchPrice:d,sellWorker:C,sellWorkerCost:S,startIncrements:()=>{Object.values(a).forEach(g=>{Y(g)})}}}var W=(e,n)=>{const o=e.__vccOpts||e;for(const[a,r]of n)o[a]=r;return o};const Fn=B({components:{NButton:te},props:{research:k},setup(){const{sellFeatureEnabled:e}=K(),{canIncrementResearch:n,incrementResearch:o}=ce();return{canIncrementResearch:n,displayButtonText:()=>window.innerWidth>700||!e.value,incrementResearch:o,renderIcon:m=>$(m)}}}),Bn={key:0};function qn(e,n,o,a,r,m){const d=u("n-button");return f(),y(d,{ghost:"",round:"",color:e.research.color,disabled:!e.canIncrementResearch(e.research),onClick:n[0]||(n[0]=h=>e.incrementResearch(e.research))},{icon:s(()=>[(f(),y(Ie(e.renderIcon(e.research.icon))))]),default:s(()=>[e.displayButtonText()?(f(),w("span",Bn,R(e.research.label),1)):G("",!0)]),_:1},8,["color","disabled"])}var Ve=W(Fn,[["render",qn]]);const Xn=B({setup(){}}),Zn=Ht(' made for the new year&#39;s incremental game jam (2022) <br data-v-94d8d536><br data-v-94d8d536> this is a game about &quot;science&quot; and &quot;time&quot; <br data-v-94d8d536><br data-v-94d8d536> programming by <span style="color:#00FF00;" data-v-94d8d536>pbrane</span><br data-v-94d8d536><br data-v-94d8d536> writing by James Funfer <a href="https://jamesfunfer.com/" style="color:#F72585;" target="_blank" data-v-94d8d536>author page</a><br data-v-94d8d536><br data-v-94d8d536> special thanks to: <div class="indent" data-v-94d8d536> goodjukel<br data-v-94d8d536> mystic<br data-v-94d8d536> j9<br data-v-94d8d536> grape tomato<br data-v-94d8d536> kyrr\u2202<br data-v-94d8d536> lady julz<br data-v-94d8d536> zelda<br data-v-94d8d536> dish court boohbahs </div><br data-v-94d8d536><span data-v-94d8d536>v0.5</span>',18);function zn(e,n,o,a,r,m){return Zn}var jn=W(Xn,[["render",zn],["__scopeId","data-v-94d8d536"]]);const Kn=B({components:{NButton:te,NInput:xe,NSpace:ne},props:{exportMessage:{type:Object,required:!0},exportString:{type:String,required:!0}},emits:["close-export","copy-to-clipboard"],setup(e,{emit:n}){return{closeExport:()=>{n("close-export")},copyExport:()=>{n("copy-to-clipboard",e.exportString)}}}}),Qn={style:{color:"#58c9a4"}},Vn=U(" Copy to Clipboard "),Jn=U(" Done! ");function eo(e,n,o,a,r,m){const d=u("n-input"),h=u("n-button"),p=u("n-space");return f(),y(p,{vertical:""},{default:s(()=>[E("span",Qn,R(e.exportMessage.value),1),i(d,{value:e.exportString,autosize:{minRows:10,maxRows:10},type:"textarea"},null,8,["value"]),i(p,{justify:"end"},{default:s(()=>[i(h,{onClick:e.copyExport},{default:s(()=>[Vn]),_:1},8,["onClick"]),i(h,{type:"warning",onClick:e.closeExport},{default:s(()=>[Jn]),_:1},8,["onClick"])]),_:1})]),_:1})}var to=W(Kn,[["render",eo]]);const no=B({components:{NButton:te,NInput:xe,NSpace:ne},props:{importError:{type:Object,required:!0}},emits:["cancel-import","import-string"],setup(e,{emit:n}){const o=x("");return{cancelImport:()=>{n("cancel-import")},imp:o,importString:()=>{n("import-string",o)}}}}),oo=E("span",null,[E("i",null,"This will overwrite your progress!")],-1),so={key:0,style:{color:"#FF4136"}},ro=U(" Cancel "),ao=U(" Import ");function io(e,n,o,a,r,m){const d=u("n-input"),h=u("n-button"),p=u("n-space");return f(),y(p,{vertical:""},{default:s(()=>[oo,e.importError.value?(f(),w("span",so,"Error importing game.")):G("",!0),i(d,{value:e.imp,"onUpdate:value":n[0]||(n[0]=N=>e.imp=N),autosize:{minRows:10,maxRows:10},placeholder:"Paste your export here",type:"textarea"},null,8,["value"]),i(p,{justify:"end"},{default:s(()=>[i(h,{onClick:e.cancelImport},{default:s(()=>[ro]),_:1},8,["onClick"]),i(h,{type:"warning",onClick:e.importString},{default:s(()=>[ao]),_:1},8,["onClick"])]),_:1})]),_:1})}var lo=W(no,[["render",io]]);const co=B({components:{NH4:Ge},setup(){}}),uo=U(" v0.7 - 2022-02-06 "),po=E("ul",null,[E("li",null,"prevent time expansion from continuing to expand time at 1000")],-1),mo=U(" v0.6 - 2022-02-06 "),ho=E("ul",null,[E("li",null,"fixed device button being incorrectly disabled")],-1),_o=U(" v0.5 - 2022-02-04 "),fo=E("ul",null,[E("li",null,"tooltips no longer stay alive when you mouse over them"),E("li",null,"added a button to device, for clarity"),E("li",null,"fixed time expansion cap - limit of exactly 1000")],-1),Eo=U(" v0.4 - 2022-01-30 "),To=E("ul",null,[E("li",null,"non-backwards-compatible change to saves, sorry!"),E("li",null,"copy export to clipboard"),E("li",null,"added icons and colours to the timelines and dialog boxes"),E("li",null,"every character gets their own timeline messages"),E("li",null,"fixed dialog bug attributing the wrong character"),E("li",null,"fixed game countdown continuing after game has ended but you unpause")],-1),go=U(" v0.3 - 2022-01-29 "),No=E("ul",null,[E("li",null,"added import & export"),E("li",null,"added pause! also pauses automatically for all dialogs"),E("li",null,"added autosave message"),E("li",null,"added version history dialog"),E("li",null,"fixed exploit where you could hold down enter to research too rapidly"),E("li",null,"fixed some issues with internal timers"),E("li",null,"fixed bug with local save")],-1),Oo=U(" v0.2 - 2022-01-16 "),Io=E("ul",null,[E("li",null,"fixed bug where win scenario did not trigger")],-1),vo=U(" v0.1 - 2022-01-15 "),yo=E("ul",null,[E("li",null,"initial version for new year's incremental game jam")],-1);function Lo(e,n,o,a,r,m){const d=u("n-h4");return f(),w(ue,null,[i(d,{style:{color:"##EFAE0"}},{default:s(()=>[uo]),_:1}),po,i(d,{style:{color:"#f4e285"}},{default:s(()=>[mo]),_:1}),ho,i(d,{style:{color:"#e0c3fc"}},{default:s(()=>[_o]),_:1}),fo,i(d,{style:{color:"#4CC9F0"}},{default:s(()=>[Eo]),_:1}),To,i(d,{style:{color:"#4361EE"}},{default:s(()=>[go]),_:1}),No,i(d,{style:{color:"#B5179E"}},{default:s(()=>[Oo]),_:1}),Io,i(d,{style:{color:"#F72585"}},{default:s(()=>[vo]),_:1}),yo],64)}var So=W(co,[["render",Lo]]);const Ao=B({components:{NButton:te,NH4:Ge,NIcon:V,NSpace:ne},props:{messageList:{type:Array,required:!0},displayMessageTitle:{type:Boolean,default:!1}},setup(){return{messageIcon:e=>e?$(e):$(de)}}}),be=e=>(xt("data-v-889c9c92"),e=e(),Gt(),e),ko=be(()=>E("br",null,null,-1)),wo={key:0},Co={key:0,class:"person"},bo=be(()=>E("br",null,null,-1)),Ro=be(()=>E("br",null,null,-1));function Mo(e,n,o,a,r,m){const d=u("n-icon"),h=u("n-button");return f(),w("div",null,[ko,(f(!0),w(ue,null,me(e.messageList,p=>(f(),w("div",{key:p.title},[e.displayMessageTitle?(f(),w("span",wo,[i(h,{text:""},{icon:s(()=>[i(d,{color:p.color},{default:s(()=>[(f(),y(Ie(e.messageIcon(p.icon))))]),_:2},1032,["color"])]),default:s(()=>[E("b",null,R(p.title),1)]),_:2},1024)])):G("",!0),(f(!0),w(ue,null,me(p.messageSections,N=>(f(),w("div",{key:N.text},[N.person?(f(),w("span",Co,R(N.person?N.person+": ":null),1)):G("",!0),E("span",null,R(N.text),1),bo,Ro]))),128))]))),128))])}var Re=W(Ao,[["render",Mo],["__scopeId","data-v-889c9c92"]]);function Je(){const{countdownTriggered:e,gameEnded:n,gamePaused:o}=K(),{countdownTimer:a,countupTimer:r}=he();return{pause:()=>{a.stop(),r.stop(),o.value=!0},unpause:()=>{o.value=!1,n.value||(e.value?a.resume():r.start())}}}class L{constructor(n,o,a,r){T(this,"title");T(this,"messageSections");T(this,"timestamp","");T(this,"isRead",!1);T(this,"wasSent",!1);T(this,"icon");T(this,"color","");this.title=n,this.messageSections=o,this.icon=a||de,this.color=r}}const q={[H.INTRO]:new L("Intro",[{text:"The year is 1984. You are Lennox, a physicist researching the most cutting-edge technology: Quantum Computing! With enough research, you should be able to build your own Quantum Computer."},{text:"Let's get started..."}],de),[H.UNLOCK_COUNTDOWN]:new L("You fire up your very first quantum computer.",[{person:"Quantum Computer",text:"Beep Boop. Detecting timelines. ALERT. ALERT. YOUR QUANTUM REALITY HAS SKEWED INTO A TANGENT. TIME IS ENDING. DOOMSDAY IMMINENT."},{person:"Lennox",text:"Great Scott! What am I going to do? I'll need to invent a way to slow down time so that I have enough time to fix time!"}]),[H.UNLOCK_WORKERS]:new L("A Breakthrough.",[{person:"Lennox",text:"Eureka! If I reroute the nanoseconds through the quantum flux thingamajig in the compumatrix, I *should* be able to slow time down. If only I had some undergrads to help, this is a lot of work and I haven't even had time to order a pizza - the most important element of research!"}]),[H.UNLOCK_SLOWDOWN]:new L("The Undergrads make themselves useful.",[{person:"Undergrad",text:"Dr. Lennox. Dr. Lennox, take a look at this. It appears there is indeed a way to *add* more time before the Doomsday Event."},{person:"Lennox",text:"I thought we were calling it the Doomsminute Event."},{person:"Undergrad",text:"The media disagreed. What's important is that we can spend research to SLOW time down. So that we have more time... so to speak... to solve our time problem."},{person:"Lennox",text:"Then it looks like it's time for the next phase."}]),[H.UNLOCK_YOUNG_LENNOX]:new L("The Discovery of the Device.",[{person:"Lennox",text:"We've done it. We've found a way to stop the Doomsminute Event. We need to build THE DEVICE!"},{person:"Undergrad",text:"Doctor. We've got a problem. Our research indicates that, with the exception of quantum physics, the kind of research required to complete THE DEVICE has been lost."},{person:"Lennox",text:"Lost how?"},{person:"Undergrad",text:"Lost to time."},{person:"Lennox",text:"What *kind* of research?"},{person:"Undergrad",text:"Well. It appears that only one scientist, back in the 30s, was doing this kind of biological research\u2026"},{person:"Lennox",text:"WHO?"},{person:"Undergrad",text:"Well\u2026YOU, doctor!"},{person:"Lennox",text:"By the Code!"},{person:"Narrator",text:"And it was at that time that Lennox experienced a *flashback*"}]),[H.HALFWAY]:new L("Halfway there",[{text:"Whooooa we're halfway there whoooooa livin on software... click some more and we'll make it I swear..."}]),[H.SPEAK_TO_LENNOX]:new L("The Flashback",[{person:"Young Lennox",text:"Yessirma'am, it is indeed an ordinary type day in the ordinary present in which I do my EXTRAORDINARY RESEARCH. It sure is quiet and lonely doing research of the singularly unique type to which I am accustomed to doing. Maybe the radio will help motivate me to greater heights of genius..."},{person:"Narrator",text:"And then, as Young Lennox fiddled with the radio dial..."},{person:"Lennox",text:"(Speaking through the radio): Hello? Hello me, can you hear me?"},{person:"Young Lennox",text:"What an interesting program. They must be experimenting with something more interactive."},{person:"Lennox",text:"No, you fool! I am speaking to you through the radio and, more importantly, through time!"},{person:"Young Lennox",text:"Inconceivable!"},{person:"Lennox",text:"Not so! Merely improbable! But time is short and you... I mean, I, must listen to me! Your research! You mustn't quit!"},{person:"Young Lennox",text:"I wasn't planning on it!"},{person:"Lennox",text:"Yes you are! In approximately three days you will lose most of your funding. But you must carry on! I am you from the future and I come with a dire warning... a quantum doomsday event is coming and I need your assistance to stop it... will you help me?"},{person:"Young Lennox",text:"As completely improbable, fantastical, and downright impossible as this all sounds... yes, I will help you... me. But if I continue my research, won't that change the trajectory of my future?"},{person:"Lennox",text:"..."},{person:"Young Lennox",text:"..."},{person:"Lennox",text:"...let's not overthink this. Just carry on with your research and forward me the data."},{person:"Young Lennox",text:"...how?"},{person:"Young Lennox",text:"I suppose, just bury it in my backyard and time will take its course!"},{person:"Young Lennox",text:"Of course!"}]),[H.UNLOCK_SAMA]:new L("Breakthrough #2",[{person:"Lennox",text:"Younger me! I am once again contacting you through the science of quantum radio! Have you made any breakthroughs, perchance?"},{person:"Young Lennox",text:"As a matter of fact, I have! But you may not fancy the conclusion. My research has led me to conclude that only an immortal will be able to withstand the rigors necessary to save us from our time crisis. Once they are created, being immortal, they should be able to move through time normally to your present (my future) and save us from the Doomsminute Event. However, they will require a special chamber through which to manipulate the quantum mechanics - that is..."},{person:"Lennox",text:"You don't mean...?"},{person:"Young Lennox",text:"I do."},{person:"Lennox",text:"A crystal sarcophagus! I always said it couldn't be done - and now, it must! Well, improbable as this may be, it is not an impossible task\u2026I daresay I *do* fancy the challenge, my young self!"},{person:"Young Lennox",text:"But there is more, my wrinkled replica. In order to create this immortal, I must do more than stretch mere telomeres. Only one body of study from the ancient past, long forgotten, can solve a mystery for us and provide a key ingredient: a Philosopher's Stone!"},{person:"Lennox",text:"Then I know what I must do."}]),[H.SPEAK_TO_SAMA]:new L("Enter the Alchemist.",[{person:"Narrator",text:"Using a Quantum Computer, Lennox sends an image even further back in time - to the golden age of alchemy."},{person:"Lennox",text:"Can you hear me, oh great scientist?"},{person:"Sama",text:"I can *see* you! What is this strange projection before me? Surely I am not having a religious experience?"},{person:"Lennox",text:"That depends on how you feel about the heroics of saving the world. Sama. Great alchemist of a golden age - I beg your wisdom. You once sought a philosopher's stone but abandoned that research in favour of..."},{person:"Sama",text:"I have abandoned nothing!"},{person:"Lennox",text:"But you will! Hear me, for although time is abundant for you, for me it is precious and brief. I beg you not to abandon your studies. An experiment of mine has caused time to SKEW into a tangent... time itself is about to end. We need a philosopher's stone if we are ever to solve this problem, and only YOU can build one. And\u2026bury it somewhere that only I can find it."},{person:"Sama",text:"...I'm gonna need a bigger workshop. What do I get out of this?"},{person:"Lennox",text:"...massive prestige long after you're dead?"}]),[H.UNLOCK_ITOTIA]:new L("Mathematical!",[{person:"Lennox",text:"How is progress, my medieval compatriot?"},{person:"Sama",text:"Medieval? What does that even mean...?"},{person:"Lennox",text:"...never mind."},{person:"Sama",text:"You are a strange apparition. Progress continues but I have encountered a problem. The stone must be... configured."},{person:"Lennox",text:"Configured how?"},{person:"Sama",text:"Mathematically. Surely in your advanced time you can find a way."},{person:"Lennox",text:"Or I could make the logical choice, and contact the greatest mathematicians ever!"},{text:"And so..."},{person:"Lennox",text:"...so will you help me, ancient Mayan?"},{person:"Itotia",text:"My name is Itotia. And yes. I will help you, even though your civilization is ending in 28 years."},{person:"Lennox",text:"I just told you - it's ending far sooner!"},{person:"Itotia",text:"Not according to *our* calendars..."}]),[H.UNLOCK_NECHTAN]:new L("The Final Countdown",[{person:"Itotia",text:"The calculation is almost complete, Lennox. Now we must look to the stars."},{person:"Lennox",text:"What do the stars have to..."},{person:"Itotia",text:"You future people spend too much time looking inward and not enough time looking up. Stop questioning everything."},{person:"Lennox",text:"Like the lack of language barrier?"},{person:"Itotia",text:"Exactly. Neither should you question the need to create a massive series of stone pillars, to align the energy of the stars. My calculations point to this - it will be needed or the math will mean nothing. But we lack the resources to complete this. Surely in your time, massive stones are aplenty."},{person:"Lennox",text:"An alignment of stone pillars, you say?. I know just the civilization..."},{text:"And so..."},{person:"Lennox",text:"...so that's what I need from your people, Nechtan. What do you say?"},{person:"Nechtan",text:"I say we're gonna need a bigger boat. For the stones... y'know."}]),[H.SUCCESS]:new L("Device Completion",[{text:"And so, as the last stone rises on the ancient plain, Nechtan records the alignment of the stars and inscribes the information on a cavern wall..."},{text:"...solving the final riddle of Itotia's calculation, which is recorded on a calendar..."},{text:"...which Sama then uses to configure the philosopher's stone, which is buried in a box..."},{text:"...dug up by Young Lennox's archaeology team and fed to the volunteer Omegaperson..."},{text:"...who, in 1984, steps into the Crystal Sarcophagus in order to solve the TIME PARADOX! Congratulations, There Is Time Now!..."}],Pe,"#FFDC00"),[H.FAILURE]:new L("Failure",[{text:`As you watch the final seconds of the clock run out and drain the last drops of your whiskey, listening to the final throes of the undergrad's desperate bacchanal, you wonder: "did I not click things quickly enough?"`},{text:"#outatime"}],De,"#FF4136"),[t.PHYSICS]:new L("Unlocked Physics",[{text:"The particulars of particles."}]),[t.QUANTUM_COMPUTING]:new L("Unlocked Quantum Computing",[{text:"The study of how to use phenomena in quantum physics to create new ways of computing."}]),[t.QUANTUM_COMPUTER]:new L("Unlocked Quantum Computer",[{text:"You've made a quantum leap in the field of computing!"}]),[t.CHRONOCRYSTALS]:new L("Unlocked Chronocrystals",[{text:"I'm sure in 2022 time crystals are available in every corner drug store, but in 1984 they're a little hard to come by."}]),[t.BIOLOGY]:new L("Unlocked Biology",[{text:"The study of living stuff, and stuff."}]),[t.GENETIC_MEMORY]:new L("Unlocked Genetic Memory",[{text:"Remember the memories."}]),[t.TELOMERE_STRETCHER]:new L("Unlocked Telomere Stretcher",[{text:"It's a bit of a stretch, but you believe that prolonging a lifespan might be related to lengthening time."}]),[t.THE_FLUID]:new L("Unlocked The Fluid",[{text:"The Fluid! Lennox, I must have the Fluid!"}]),[t.ALCHEMY]:new L("Unlocked Alchemy",[{text:"Sure it seems like a romantic pastime, but it's mostly mercury poisoning when you get down to it."}]),[t.CHRONOMOGRIFICATION]:new L("Unlocked Chronomogrification",[{text:"You can transmogrify and now you can chronomogrify, but can you ever just mogrify?"}]),[t.DISTILLER]:new L("Unlocked Distiller",[{text:"I know you're tempted, but this is for science, not hooch."}]),[t.ELEMENT_ZERO]:new L("Unlocked Element Zero",[{text:"Is this trademarked?"}]),[t.MATHEMATICS]:new L("Unlocked Mathematics",[{text:"The purest of the sciences, except for economics."}]),[t.TIMELESS_ALGEBRA]:new L("Unlocked Timeless Algebra",[{text:"Classic."}]),[t.NEPOHUALTZINTZIN]:new L("Unlocked Nepohuatlzintzin",[{text:"Eat your heart out, abacus."}]),[t.OBSIDIAN]:new L("Unlocked Obsidian",[{text:"Coal's sexier cousin."}]),[t.ASTRONOMY]:new L("Unlocked Astronomy",[{text:"Astronomy compels the soul to look upward, and...oh sorry, wrong game."}]),[t.AETHERIC_HOROSCOPES]:new L("Unlocked Aetheric Horoscopes",[{text:"Astronomy, astrology...what's the difference?"}]),[t.ZODIAC_TALISMAN]:new L("Unlocked Zodiac Talisman",[{text:"Comes in 12 varieties."}]),[t.SARSEN_STONES]:new L("Unlocked Sarsen Stones",[{text:'90% sandstone, 10% "how the heck did they move those massive things?"'}]),[t.CRYSTAL_SARCOPHAGUS]:new L("Unlocked Crystal Sarcophagus",[{text:"The final stage of the DEVICE. Why a sarcophagus? Because 'Crystal Crypt' doesn't roll off the tongue."}]),[t.OMEGAPERSON]:new L("Unlocked Omegaperson",[{text:"Not the Charlton Heston version."}]),[t.PHILOSOPHERS_STONE]:new L("Unlocked Philosopher's Stone",[{text:"Definitely not a Sorcerer's Stone. That's not even a real thing."}]),[t.TZOLKIN]:new L("Unlocked Tzolk'in",[{text:'"The division of days." Whatever you do, do NOT divide them by zero.'}]),[t.TIMEHENGE]:new L("Unlocked Timehenge",[{text:"The name says it all."}])},Uo=x(!1);function ye(){const e=Ye(),{personList:n}=se(),{pause:o,unpause:a}=Je(),{timeElapsed:r}=he(),m=l=>{o();const C=l.icon?l.icon:de,I=l.color?{color:l.color}:{};e.create({title:l.title,content:()=>$(Re,{messageList:[l]}),icon:()=>$(V,I,{default:()=>$(C)}),maskClosable:!1,closable:!1,positiveText:"OK!",onPositiveClick:a})},d=l=>{o(),e.create({title:"Unlocked Multiple",content:()=>$(Re,{messageList:l,displayMessageTitle:!0}),icon:()=>$(V,null,{default:()=>$(de)}),maskClosable:!1,closable:!1,positiveText:"OK!",onPositiveClick:a})},h=(l,C,I)=>{const b=new Date(C,0);b.setDate(b.getDate()+I.value),l.timestamp=b.toISOString().split("T")[0],l.timestamp=l.timestamp.replace("1900-","2524 BC ")},p=()=>S(q[H.INTRO],[c.LENNOX_OLD]),N=l=>{const C=new Array;l.forEach(I=>{const b=q[I.research.key];b.wasSent=!0,b.icon=I.research.icon,b.color=I.research.color;const D=I.person;h(b,D.year,r),D.messageList.unshift(b),C.push(b)}),d(C)},O=(l,C)=>{const I=q[l.key];I.wasSent=!0,I.icon=l.icon,I.color=l.color,m(I),h(I,C.year,r),C.messageList.unshift(I)},S=(l,C)=>{l.wasSent=!0,m(l),C.forEach(I=>{const b=Oe({},l),D=n[I];h(b,D.year,r),D.messageList.unshift(b)})};return{sendInitialMessage:p,sendNarrativeMessage:S,sendUnlockMessage:O,sendUnlockMessages:N,showTimeline:Uo}}class $o{constructor(n,o,a,r,m,d,h,p,N,O,S,l,C,I){T(this,"currency");T(this,"sellFeatureEnabled");T(this,"gameStarted");T(this,"gameWon");T(this,"gameEnded");T(this,"countdownTriggered");T(this,"countdownSecondsLeft");T(this,"countupSecondsPassed");T(this,"expandConstant");T(this,"slowdownEnabled");T(this,"spokeToLennox");T(this,"spokeToSama");T(this,"people");T(this,"researches");this.currency=n,this.sellFeatureEnabled=o,this.gameStarted=a,this.gameWon=r,this.gameEnded=m,this.countdownTriggered=d,this.countdownSecondsLeft=h,this.countupSecondsPassed=p,this.expandConstant=N,this.slowdownEnabled=O,this.spokeToLennox=S,this.spokeToSama=l,this.people=C,this.researches=I}}class Ho{constructor(n,o,a,r){T(this,"key");T(this,"timestamp");T(this,"isRead");T(this,"wasSent");this.key=n,this.timestamp=o,this.isRead=a,this.wasSent=r}}class xo{constructor(n,o,a){T(this,"key");T(this,"isUnlocked");T(this,"messageList");this.key=n,this.isUnlocked=o,this.messageList=a}}class Go{constructor(n,o,a,r,m){T(this,"key");T(this,"isUnlocked");T(this,"total");T(this,"current");T(this,"numWorkers");this.key=n,this.isUnlocked=o,this.total=a,this.current=r,this.numWorkers=m}}ie.exports.config({name:le.DB_NAME});function Me(){const{currency:e}=Ce(),{countdownTriggered:n,currentPerson:o,gameEnded:a,gameStarted:r,gameWon:m,isLoading:d,sellFeatureEnabled:h,slowdownEnabled:p,spokeToLennox:N,spokeToSama:O}=K(),{personList:S,researchList:l}=se(),{countdownTimer:C,countupTimer:I,expandConstant:b}=he(),D=()=>(console.log(`clearing game state in ${ie.exports.driver()}`),ie.exports.setItem(Ee.GAME_STATE,null).then(function(){Object.values(S).forEach(v=>{v.key!=c.LENNOX_OLD&&(v.isUnlocked=!1),v.messageList=[]}),Object.keys(l).forEach(v=>{const X=l[v];v!=t.PHYSICS&&(X.isUnlocked=!1),X.total=0,X.current=0,X.numWorkers=0}),e.value=0,h.value=!1,r.value=!0,m.value=!1,a.value=!1,n.value=!1,b.value=le.INITIAL_EXPANSION_CONSTANT,p.value=!1,N.value=!1,O.value=!1,C.restart(le.INITIAL_TIME),C.stop(),I.restart(0),o.value=c.LENNOX_OLD}).catch(function(v){console.log(`Error saving game state: ${v}`)})),A=()=>{const v=new Array;Object.values(S).forEach(ee=>{const z=new Array;ee.messageList.forEach(ae=>{const rt=Object.keys(q).find(at=>q[at].title===ae.title);z.push(new Ho(rt,ae.timestamp,ae.isRead,ae.wasSent))});const Q=new xo(ee.key,ee.isUnlocked,z);v.push(Q)});const X=new Array;return Object.keys(l).forEach(ee=>{const z=l[ee],Q=new Go(ee,z.isUnlocked,z.total,z.current,z.numWorkers);X.push(Q)}),new $o(e.value,h.value,r.value,m.value,a.value,n.value,C.secondsLeft(),I.secondsElapsed(),b.value,p.value,N.value,O.value,v,X)},F=()=>{if(console.log(`saving to ${ie.exports.driver()}`),d.value){console.log("busy loading, will skip saving");return}return ie.exports.setItem(Ee.GAME_STATE,A()).catch(function(v){console.log(`Error saving game state: ${v}`)})},Y=v=>{v.people.forEach(X=>{const re=S[X.key];re.isUnlocked=X.isUnlocked;const ee=new Array;X.messageList.forEach(z=>{const Q=q[z.key],ae=l[z.key];ae&&(Q.icon=ae.icon,Q.color=ae.color),Q.isRead=z.isRead,Q.wasSent=z.wasSent,Q.timestamp=z.timestamp,ee.push(Q)}),re.messageList=ee}),v.researches.forEach(X=>{const re=l[X.key];re.isUnlocked=X.isUnlocked,re.total=X.total,re.current=X.current,re.numWorkers=X.numWorkers}),e.value=v.currency,h.value=v.sellFeatureEnabled,r.value=v.gameStarted,m.value=v.gameWon,a.value=v.gameEnded,n.value=v.countdownTriggered,I.restart(v.countupSecondsPassed),p.value=v.slowdownEnabled,N.value=v.spokeToLennox,O.value=v.spokeToSama,n.value&&(b.value=v.expandConstant,a.value||C.restart(v.countdownSecondsLeft),I.stop())},J=()=>(console.log(`loading from ${ie.exports.driver()}`),d.value=!0,ie.exports.getItem(Ee.GAME_STATE).then(function(v){if(!v){d.value=!1,console.log("didn't end up loading");return}Y(v),d.value=!1,console.log("done loading")}).catch(function(v){d.value=!1,console.log(`Error loading game state: ${v}`)}));return{clearGameState:D,exportGameState:()=>btoa(encodeURIComponent(JSON.stringify(A()))),importGameState:v=>{console.log("import game state");try{return Y(JSON.parse(decodeURIComponent(atob(v)))),!0}catch{return!1}},loadGameState:()=>ie.exports.ready().then(J),saveGameState:F}}const Le=x(!1),Ue=x("Light Mode");function et(){const{researchList:e}=se();return{otherThemeName:Ue,switchTheme:()=>{Le.value?(Le.value=!1,Ue.value="Light Mode",e[t.GENETIC_MEMORY].color="#FEFAE0",e[t.CHRONOMOGRIFICATION].color="#FFFFFF"):(Le.value=!0,Ue.value="Dark Mode",e[t.GENETIC_MEMORY].color="#826107",e[t.CHRONOMOGRIFICATION].color="#363431")},lightMode:Le}}const Po=B({components:{AboutIcon:We,DarkModeIcon:Pt,ExportIcon:Fe,ImportIcon:Be,LightModeIcon:Dt,NButton:te,NIcon:V,NLayoutFooter:Yt,NSpace:ne,NTooltip:Wt,PauseIcon:we,RestartIcon:qe,VersionIcon:Xe},setup(){const e=Ye(),{sendInitialMessage:n}=ye(),o=Ze(),{pause:a,unpause:r}=Je(),{clearGameState:m,exportGameState:d,importGameState:h}=Me(),{lightMode:p,switchTheme:N}=et();return{about:()=>{a(),e.create({title:"About",content:()=>$(jn),icon:()=>$(We),positiveText:"Neat",onPositiveClick:r,onMaskClick:r,onClose:r})},exportGame:()=>{a();const A=x(""),F=e.create({title:"Export Game",content:()=>$(to,{exportMessage:A,exportString:d(),onCopyToClipboard:Y=>{console.log(Y),navigator.clipboard.writeText(Y).then(()=>A.value="Copy successful!").catch(()=>A.value="Error copying to clipboard.")},onCloseExport:()=>{r(),F.destroy()}}),icon:()=>$(Fe),onMaskClick:r,onClose:r})},importGame:()=>{a();const A=x(!1),F=e.create({title:"Import Game",content:()=>$(lo,{importError:A,onCancelImport:()=>{r(),F.destroy()},onImportString:Y=>{h(Y.value)?(A.value=!1,F.destroy(),o.info("Successfully imported game.")):A.value=!0}}),icon:()=>$(Be),onMaskClick:r,onClose:r})},lightMode:p,otherThemeName:()=>p.value?"Dark Mode":"Light Mode",pauseTime:()=>{a(),e.create({title:"Paused",content:"There was time now... to go to the bathroom.",icon:()=>$(we),positiveText:"Back to it!",onPositiveClick:r,onMaskClick:r,onClose:r})},restart:()=>{a(),e.create({title:"Restart Game?",content:"You will lose all of your progress!",icon:()=>$(qe),positiveText:"I'm going back to the start",negativeText:"Oops, never mind",onPositiveClick:()=>{m().then(n)},onNegativeClick:r,onMaskClick:r,onClose:r})},switchTheme:N,version:()=>{a(),e.create({title:"Version History",content:()=>$(So),icon:()=>$(Xe),positiveText:"Good to Know",onPositiveClick:r,onMaskClick:r,onClose:r})}}}}),Do=E("span",null,"About",-1),Yo=E("span",null,"Version History",-1),Wo=E("span",null,"Pause",-1),Fo=E("span",null,"Import",-1),Bo=E("span",null,"Export",-1),qo=E("span",null,"Restart",-1);function Xo(e,n,o,a,r,m){const d=u("about-icon"),h=u("n-icon"),p=u("n-button"),N=u("n-tooltip"),O=u("version-icon"),S=u("light-mode-icon"),l=u("dark-mode-icon"),C=u("pause-icon"),I=u("import-icon"),b=u("export-icon"),D=u("restart-icon"),A=u("n-space"),F=u("n-layout-footer");return f(),y(F,{bordered:""},{default:s(()=>[i(A,{justify:"end",style:{padding:"5px"}},{default:s(()=>[i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[0]||(n[0]=Y=>e.about())},{icon:s(()=>[i(h,null,{default:s(()=>[i(d)]),_:1})]),_:1})]),default:s(()=>[Do]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[1]||(n[1]=Y=>e.version())},{icon:s(()=>[i(h,null,{default:s(()=>[i(O)]),_:1})]),_:1})]),default:s(()=>[Yo]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:e.switchTheme},{icon:s(()=>[i(h,null,{default:s(()=>[e.lightMode?G("",!0):(f(),y(S,{key:0})),e.lightMode?(f(),y(l,{key:1})):G("",!0)]),_:1})]),_:1},8,["onClick"])]),default:s(()=>[E("span",null,R(e.otherThemeName()),1)]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[2]||(n[2]=Y=>e.pauseTime())},{icon:s(()=>[i(h,null,{default:s(()=>[i(C)]),_:1})]),_:1})]),default:s(()=>[Wo]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[3]||(n[3]=Y=>e.importGame())},{icon:s(()=>[i(h,null,{default:s(()=>[i(I)]),_:1})]),_:1})]),default:s(()=>[Fo]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[4]||(n[4]=Y=>e.exportGame())},{icon:s(()=>[i(h,null,{default:s(()=>[i(b)]),_:1})]),_:1})]),default:s(()=>[Bo]),_:1}),i(N,{placement:"top",trigger:"hover"},{trigger:s(()=>[i(p,{strong:"",circle:"",onClick:n[5]||(n[5]=Y=>e.restart())},{icon:s(()=>[i(h,null,{default:s(()=>[i(D)]),_:1})]),_:1})]),default:s(()=>[qo]),_:1})]),_:1})]),_:1})}var Zo=W(Po,[["render",Xo]]);const zo=B({components:{ConfettiExplosion:Ft,LostIcon:De,NIcon:V,NLayoutHeader:Bt,NPopover:fe,NSpace:ne,NSpin:qt,NStatistic:Xt,PauseIcon:we,TimeIcon:de,WonIcon:Pe},setup(){const{currency:e}=Ce(),{confetti:n,countdownTriggered:o,gameEnded:a,gamePaused:r,gameWon:m,sellFeatureEnabled:d,slowdownEnabled:h}=K(),{personList:p}=se(),{countdownTimer:N,countupTimer:O,expandConstant:S,timeLeft:l}=he(),C=window.innerWidth>700?x("There Was Time Now"):x("TWTN"),I=_e(()=>p[c.NECHTAN].isUnlocked?"title2524BC":p[c.ITOTIA].isUnlocked?"title374":p[c.SAMA].isUnlocked?"title904":p[c.LENNOX_YOUNG].isUnlocked?"title1934":"title1984"),b=_e(()=>window.innerWidth>900?"titleTextBig":p[c.NECHTAN].isUnlocked?"titleText2524BC":p[c.ITOTIA].isUnlocked?"titleText374":p[c.SAMA].isUnlocked?"titleText904":p[c.LENNOX_YOUNG].isUnlocked?"titleText1934":"titleText1984");function D(){return S.value<100?S.value.toFixed(2):S.value.toFixed(0)}return{confetti:n,confettiHeight:window.innerHeight,confettiWidth:window.innerWidth,countdownTimer:N,countupTimer:O,countdownTriggered:o,currency:e,expandConstantFormatted:D,gameEnded:a,gamePaused:r,gameWon:m,sellFeatureEnabled:d,slowdownEnabled:h,timeLeft:l,titleFont:I,titleText:b,titleValue:C}}}),jo=U(" 0 "),Ko={key:0},Qo={key:1};function Vo(e,n,o,a,r,m){const d=u("n-space"),h=u("ConfettiExplosion"),p=u("n-statistic"),N=u("n-popover"),O=u("time-icon"),S=u("n-icon"),l=u("n-spin"),C=u("pause-icon"),I=u("lost-icon"),b=u("won-icon"),D=u("n-layout-header");return f(),y(D,{bordered:"",style:{"padding-top":"5px"}},{default:s(()=>[i(d,{justify:"space-between",class:"twtnHeader"},{default:s(()=>[i(d,{style:{"padding-left":"5px"},width:"100%"},{default:s(()=>[E("span",{class:Zt([e.titleText,e.titleFont])},R(e.titleValue),3)]),_:1}),e.confetti?(f(),y(h,{key:0,"particle-count":200,duration:5e3,"stage-height":e.confettiHeight,"stage-width":e.confettiWidth,colors:["#F72585","#B5179E","#4361EE","#4CC9F0"]},null,8,["stage-height","stage-width"])):G("",!0),i(d,{width:"209px"},{default:s(()=>[e.sellFeatureEnabled?(f(),y(p,{key:0,label:"Budget"},{default:s(()=>[U(R(e.currency),1)]),_:1})):G("",!0),e.slowdownEnabled&&!e.gameEnded?(f(),y(p,{key:1,label:"Time Expansion"},{default:s(()=>[U(R(e.expandConstantFormatted()),1)]),_:1})):G("",!0),i(N,{trigger:"hover","keep-alive-on-hover":!1},{trigger:s(()=>[E("div",null,[e.gameEnded?(f(),y(p,{key:0,label:"Days Left"},{default:s(()=>[jo]),_:1})):e.countdownTriggered?(f(),y(p,{key:1,label:"Days Left"},{default:s(()=>[U(R(e.timeLeft),1)]),_:1})):G("",!0)])]),default:s(()=>[e.gameEnded?(f(),w("span",Qo,"Game is over!")):(f(),w("span",Ko,R(e.countdownTimer.realPeopleTimeLeft())+" Real People Time\u2122 left",1))]),_:1}),e.countdownTimer.isRunning()?(f(),y(l,{key:2,size:"large",style:{"vertical-align":"middle"}},{icon:s(()=>[i(S,null,{default:s(()=>[i(O)]),_:1})]),_:1})):G("",!0),e.gamePaused&&!e.gameEnded?(f(),y(S,{key:3,color:"#63e2b7",size:"40"},{default:s(()=>[i(C)]),_:1})):G("",!0),e.gameEnded&&!e.gameWon?(f(),y(S,{key:4,color:"#63e2b7",size:"40"},{default:s(()=>[i(I,{color:"#FF4136"})]),_:1})):G("",!0),e.gameEnded&&e.gameWon?(f(),y(S,{key:5,color:"#63e2b7",size:"40"},{default:s(()=>[i(b,{color:"#FFDC00"})]),_:1})):G("",!0)]),_:1})]),_:1})]),_:1})}var Jo=W(zo,[["render",Vo],["__scopeId","data-v-28773404"]]);const es=B({components:{NPopover:fe},props:{research:k},setup(e){const{currentPerson:n}=K();return{changeTab:()=>{n.value=e.research.personKey},messages:q,placement:()=>window.innerWidth>700?"right":"bottom"}}}),ts=E("br",null,null,-1);function ns(e,n,o,a,r,m){const d=u("n-popover");return f(),y(d,{trigger:"hover",placement:e.placement(),style:{maxWidth:"200px"},"keep-alive-on-hover":!1},{trigger:s(()=>[E("div",{onClick:n[0]||(n[0]=h=>e.changeTab())},[U(R(e.research.label)+" ",1),E("b",{style:pe({color:e.research.color})},R(e.research.total),5)])]),default:s(()=>[E("div",null,[E("span",{style:pe({color:e.research.color})},R(e.research.label),5),ts,U(" "+R(e.messages[e.research.key].messageSections[0].text),1)])]),_:1},8,["placement"])}var tt=W(es,[["render",ns]]);function os(){function e(n,o){return()=>$(V,{color:o},{default:()=>$(n)})}return{renderIcon:e}}function nt(e){return()=>$(tt,{research:e})}const ss=B({components:{NLayoutSider:zt,NMenu:jt},setup(){const{personList:e,researchList:n}=se(),{renderIcon:o}=os();let a=window.innerWidth<700;const r=_e(()=>{const m=[],d=Object.values(e).filter(O=>O.isUnlocked),h=[],p=[];d.forEach(O=>{const S=[];Object.values(n).filter(l=>l.isUnlocked&&!l.isDevice&&l.personKey==O.key).forEach(l=>S.push({label:nt(l),key:l.label,icon:o(l.icon,l.color)})),Object.values(n).filter(l=>l.isUnlocked&&l.isDevice&&l.personKey==O.key).forEach(l=>h.push({label:nt(l),key:l.label,icon:o(l.icon,l.color)})),p.push(S)});let N=0;return p.forEach(O=>{N>0&&O.length>0&&m.push({key:"divider-"+N,type:"divider"}),m.push(...O),N++}),h.length>0&&(m.push({key:"divider-device",type:"divider"}),m.push({key:"devices",label:"D E V I C E S"}),m.push({key:"divider-device2",type:"divider"}),m.push(...h)),m});return{collapsed:x(a),sidebar:r,TGameSiderItem:tt}}});function rs(e,n,o,a,r,m){const d=u("n-menu"),h=u("n-layout-sider");return f(),y(h,{bordered:"","show-trigger":"","collapse-mode":"width","collapsed-width":64,collapsed:e.collapsed,width:245,"native-scrollbar":!1,onCollapse:n[0]||(n[0]=p=>e.collapsed=!0),onExpand:n[1]||(n[1]=p=>e.collapsed=!1)},{default:s(()=>[i(d,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":32,"icon-size":32,options:e.sidebar},null,8,["collapsed","options"])]),_:1},8,["collapsed"])}var as=W(ss,[["render",rs]]);const is=B({components:{},props:{person:oe},setup(){}});function ls(e,n,o,a,r,m){return f(),w("span",{onClick:n[0]||(n[0]=d=>e.person.markRead())},R(e.person.name),1)}var cs=W(is,[["render",ls]]);const us=B({components:{NButton:te,NH2:Kt,NIcon:V,NProgress:ze,NSpace:ne,TGameResearchButton:Ve},props:{research:k},setup(){const{canIncrementResearch:e,incrementResearch:n}=ce();return{canIncrementResearch:e,startResearch:m=>{if(e(m))return n(m)},displayText:()=>window.innerWidth>700,renderIcon:m=>()=>$(m)}}}),ds=U(" Start ");function ps(e,n,o,a,r,m){const d=u("n-icon"),h=u("n-h2"),p=u("n-button"),N=u("n-space"),O=u("n-progress");return f(),w("div",null,[i(N,{vertical:""},{default:s(()=>[i(N,null,{default:s(()=>[i(d,{color:e.research.color,size:"36"},{default:s(()=>[(f(),y(Ie(e.renderIcon(e.research.icon))))]),_:1},8,["color"]),e.displayText()?(f(),y(h,{key:0,type:"info",style:pe({color:e.research.color})},{default:s(()=>[U(R(e.research.label),1)]),_:1},8,["style"])):G("",!0),i(p,{color:e.research.color,disabled:!e.canIncrementResearch(e.research),ghost:"",round:"",onClick:n[0]||(n[0]=S=>e.startResearch(e.research))},{default:s(()=>[ds]),_:1},8,["color","disabled"])]),_:1}),i(O,{type:"line",percentage:e.research.current,height:24,"border-radius":4,"fill-border-radius":0,"indicator-placement":"inside-label",color:e.research.color},null,8,["percentage","color"])]),_:1})])}var ms=W(us,[["render",ps]]);const hs=B({props:{research:k,person:oe},setup(){const{sellFeatureEnabled:e,slowdownEnabled:n}=K(),{researchList:o}=se(),{canIncrementResearch:a}=ce();return{canIncrementResearch:a,messages:q,paymentName:()=>"Bribing",researchList:o,sellFeatureEnabled:e,slowdownEnabled:n}}}),_s={key:0},fs=E("br",null,null,-1),Es={key:0},Ts={key:1},gs=E("span",{style:{color:"#969696"}},"Needs: ",-1),Ns={key:0},Os={key:1},Is={key:0},vs=E("br",null,null,-1),ys={key:1},Ls=U(" Click on a button to start researching! "),Ss={key:0},As=U(" Sell research to increase your budget."),ks=E("br",null,null,-1),ws={key:1};function Cs(e,n,o,a,r,m){var d,h;return e.research!=null?(f(),w("div",_s,[E("span",{style:pe({color:e.research.color})},R(e.research.label),5),fs,e.research.isDevice&&e.research.total==1?(f(),w("div",Es," Complete! ")):(f(),w("div",Ts,[U(R((h=(d=e.messages[e.research.key])==null?void 0:d.messageSections[0])==null?void 0:h.text)+" ",1),(f(!0),w(ue,null,me(e.research.researchRequirementList,p=>(f(),w("div",{key:p.researchKey},[gs,E("span",{style:pe({color:e.researchList[p.researchKey].color})},[e.researchList[p.researchKey].isUnlocked?(f(),w("span",Os,R(p.quantity)+" "+R(e.researchList[p.researchKey].label),1)):(f(),w("span",Ns,"???"))],4),e.research.expand!=1&&e.slowdownEnabled?(f(),w("span",Is,[vs,E("i",null,"This will slow down time by "+R(e.research.expand)+"%",1)])):G("",!0)]))),128))]))])):(f(),w("div",ys,[Ls,e.sellFeatureEnabled?(f(),w("div",Ss,[As,ks,U(R(e.paymentName())+" "+R(e.person.workerTitle)+" may speed up your research! ",1)])):G("",!0),e.slowdownEnabled?(f(),w("div",ws," Some research may slow down time... ")):G("",!0)]))}var ot=W(hs,[["render",Cs]]);const bs=B({components:{NCard:Qt,NPopover:fe,TGameDeviceProgress:ms,TGameResearchNeeds:ot},props:{research:k},setup(){}});function Rs(e,n,o,a,r,m){const d=u("t-game-device-progress"),h=u("n-card"),p=u("t-game-research-needs"),N=u("n-popover");return f(),y(N,{style:{maxWidth:"200px"},trigger:"hover",placement:"top-start","keep-alive-on-hover":!1},{trigger:s(()=>[i(h,{style:{maxWidth:"620px"}},{default:s(()=>[i(d,{research:e.research},null,8,["research"])]),_:1})]),default:s(()=>[i(p,{research:e.research},null,8,["research"])]),_:1})}var Ms=W(bs,[["render",Rs]]);const Us=B({components:{NGrid:Vt,NGridItem:Jt,TGameDeviceCard:Ms},props:{research:k},setup(){let{incrementResearch:e}=ce();return{incrementResearch:e}}});function $s(e,n,o,a,r,m){const d=u("t-game-device-card"),h=u("n-grid-item"),p=u("n-grid");return f(),y(p,{cols:1,responsive:"screen",style:{"padding-left":"20px","max-width":"75%"}},{default:s(()=>[i(h,null,{default:s(()=>[i(d,{research:e.research},null,8,["research"])]),_:1})]),_:1})}var Hs=W(Us,[["render",$s]]);const xs=B({components:{NCollapseTransition:en,NIcon:V,NSpace:ne,NSwitch:tn,NTimeline:nn,NTimelineItem:on},props:{person:oe},setup(){const{showTimeline:e}=ye();return{renderIcon:o=>o?$(o):$(de),renderMessageContent:o=>$(Re,{messageList:[o]}),showTimeline:e}}}),Gs=U(" Hide Timeline "),Ps=U(" Show Timeline ");function Ds(e,n,o,a,r,m){const d=u("n-switch"),h=u("n-icon"),p=u("n-timeline-item"),N=u("n-timeline"),O=u("n-collapse-transition"),S=u("n-space");return f(),y(S,{vertical:"",style:{padding:"20px"}},{default:s(()=>[i(d,{value:e.showTimeline,"onUpdate:value":n[0]||(n[0]=l=>e.showTimeline=l)},{checked:s(()=>[Gs]),unchecked:s(()=>[Ps]),_:1},8,["value"]),i(O,{show:e.showTimeline},{default:s(()=>[i(N,null,{default:s(()=>[(f(!0),w(ue,null,me(e.person.messageList,l=>(f(),y(p,{key:l.title,title:l.title,content:e.renderMessageContent(l),color:l.color?l.color:"#63e2b7",time:l.timestamp},{icon:s(()=>[i(h,{size:"20"},{default:s(()=>[(f(),y(Ie(e.renderIcon(l.icon))))]),_:2},1024)]),_:2},1032,["title","content","color","time"]))),128))]),_:1})]),_:1},8,["show"])]),_:1})}var Ys=W(xs,[["render",Ds]]);const Ws=B({components:{NButton:te,NPopover:fe},props:{research:k},setup(){const{canSellResearch:e,incrementResearch:n,sellIncrement:o,sellResearch:a,sellResearchPrice:r}=ce();return{canSellResearch:e,incrementResearch:n,sellIncrement:o,sellResearch:a,sellResearchPrice:r}}}),Fs=U(" Sell ");function Bs(e,n,o,a,r,m){const d=u("n-button"),h=u("n-popover");return f(),y(h,{trigger:"hover",disabled:!e.canSellResearch(e.research,e.sellIncrement()),"keep-alive-on-hover":!1},{trigger:s(()=>[i(d,{disabled:!e.canSellResearch(e.research,e.sellIncrement()),onClick:n[0]||(n[0]=p=>e.sellResearch(e.research,e.sellIncrement()))},{default:s(()=>[Fs]),_:1},8,["disabled"])]),default:s(()=>[E("span",null,"Sell "+R(e.research.label)+" for "+R(e.sellResearchPrice(e.research,e.sellIncrement())),1)]),_:1},8,["disabled"])}var qs=W(Ws,[["render",Bs]]);const Xs=B({components:{MinusIcon:sn,NButton:te,NButtonGroup:rn,NIcon:V,NPopover:fe,PlusIcon:an},props:{research:k},setup(){let{buyWorker:e,buyWorkerCost:n,canBuyWorker:o,canSellWorker:a,sellWorker:r,sellWorkerCost:m}=ce();return{buyWorker:e,buyWorkerCost:n,canBuyWorker:o,canSellWorker:a,sellWorker:r,sellWorkerCost:m}}});function Zs(e,n,o,a,r,m){const d=u("minus-icon"),h=u("n-icon"),p=u("n-button"),N=u("n-popover"),O=u("plus-icon"),S=u("n-button-group");return f(),y(S,{size:"small"},{default:s(()=>[i(N,{trigger:"hover",disabled:!e.canSellWorker(e.research),"keep-alive-on-hover":!1},{trigger:s(()=>[i(p,{round:"",disabled:!e.canSellWorker(e.research),onClick:n[0]||(n[0]=l=>e.sellWorker(e.research))},{icon:s(()=>[i(h,null,{default:s(()=>[i(d)]),_:1})]),_:1},8,["disabled"])]),default:s(()=>[E("span",null,"Sell worker for "+R(e.sellWorkerCost(e.research)),1)]),_:1},8,["disabled"]),i(p,{style:{width:"40px"}},{default:s(()=>[U(R(e.research.numWorkers),1)]),_:1}),i(N,{trigger:"hover",disabled:!e.canBuyWorker(e.research),"keep-alive-on-hover":!1},{trigger:s(()=>[i(p,{round:"",disabled:!e.canBuyWorker(e.research),onClick:n[1]||(n[1]=l=>e.buyWorker(e.research))},{icon:s(()=>[i(h,null,{default:s(()=>[i(O)]),_:1})]),_:1},8,["disabled"])]),default:s(()=>[E("span",null,"Buy worker for "+R(e.buyWorkerCost(e.research)),1)]),_:1},8,["disabled"])]),_:1})}var zs=W(Xs,[["render",Zs]]);const js=B({components:{BuildIcon:ln,NButton:te,NIcon:V,NProgress:ze,NScrollbar:cn,NSpace:ne,NTable:un,TGameResearchNeeds:ot,TGameResearchSell:qs,TGameResearchWorkers:zs},props:{researchList:{type:Array,required:!0},person:oe},setup(){const{sellFeatureEnabled:e}=K(),{canIncrementResearch:n,changeSellIncrement:o,incrementResearch:a,sellIncrement:r}=ce(),m=x(null),d={width:window.innerWidth>700||!e.value?"205px":"36px"},h={maxWidth:"205px",height:e.value?"125px":"150px",wordWrap:"break-word"};return{currentResearch:m,canIncrementResearch:n,changeSellIncrement:o,extraStyle:h,sellFeatureEnabled:e,sellIncrement:r,incrementResearch:a,messages:q,tableStyle:d}}}),Ks=E("th",{style:{"text-align":"center"}}," Research ",-1),Qs={key:0,style:{"text-align":"center"}},Vs={key:1,style:{"text-align":"center"}},Js=["onMouseover"],er={key:0},tr={key:1},nr=["colspan"];function or(e,n,o,a,r,m){const d=u("build-icon"),h=u("n-icon"),p=u("n-progress"),N=u("n-button"),O=u("t-game-research-button"),S=u("t-game-research-sell"),l=u("t-game-research-workers"),C=u("t-game-research-needs"),I=u("n-table"),b=u("n-scrollbar"),D=u("n-space");return f(),y(D,{horizontal:""},{default:s(()=>[i(p,{type:"multiple-circle",percentage:e.researchList.slice().reverse().filter(A=>A.isUnlocked).map(({current:A})=>A),color:e.researchList.slice().reverse().filter(A=>A.isUnlocked).map(({color:A})=>A)},{default:s(()=>[i(h,{size:"40"},{default:s(()=>[i(d)]),_:1})]),_:1},8,["percentage","color"]),i(D,{vertical:""},{default:s(()=>[i(b,{"x-scrollable":""},{default:s(()=>[i(I,{bordered:!1,"single-line":!0,"single-column":!0,size:"small",style:pe(e.tableStyle)},{default:s(()=>[E("thead",null,[E("tr",null,[Ks,e.sellFeatureEnabled?(f(),w("th",Qs,[i(N,{size:"tiny",onClick:n[0]||(n[0]=A=>e.changeSellIncrement())},{default:s(()=>[U(" \xD7"+R(e.sellIncrement()),1)]),_:1})])):G("",!0),e.sellFeatureEnabled?(f(),w("th",Vs,R(e.person.workerTitle),1)):G("",!0)])]),E("tbody",null,[(f(!0),w(ue,null,me(e.researchList.filter(A=>A.isUnlocked),A=>(f(),w("tr",{key:A.label},[E("td",{onMouseover:F=>e.currentResearch=A,onMouseleave:n[1]||(n[1]=F=>e.currentResearch=null)},[i(O,{research:A},null,8,["research"])],40,Js),e.sellFeatureEnabled?(f(),w("td",er,[i(S,{research:A},null,8,["research"])])):G("",!0),e.sellFeatureEnabled?(f(),w("td",tr,[i(l,{research:A},null,8,["research"])])):G("",!0)]))),128))]),E("tfoot",null,[E("tr",null,[E("td",{style:pe(e.extraStyle),colspan:e.sellFeatureEnabled?3:1},[i(C,{research:e.currentResearch,person:e.person},null,8,["research","person"])],12,nr)])])]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var sr=W(js,[["render",or]]);function rr(e,n,o){return()=>$(cs,{person:e,name:n,numUnread:o})}const ar=B({components:{NTabs:dn,NTabPane:pn,NSpace:ne,TGameDevice:Hs,TGameTimeline:Ys,TGameResearch:sr},setup(){let{countdownTriggered:e,currentPerson:n}=K(),{personList:o,researchList:a}=se();function r(d){return Object.values(a).filter(h=>h.isUnlocked&&!h.isDevice&&h.personKey==d.key)}function m(d){return Object.values(a).find(h=>h.isUnlocked&&h.isDevice&&h.personKey==d.key)}return{countdownTriggered:e,currentPerson:n,personList:o,renderTab:rr,unlockedDevice:m,unlockedResearchList:r}}});function ir(e,n,o,a,r,m){const d=u("t-game-research"),h=u("n-space"),p=u("t-game-device"),N=u("t-game-timeline"),O=u("n-tab-pane"),S=u("n-tabs");return f(),y(S,{value:e.currentPerson,"onUpdate:value":n[0]||(n[0]=l=>e.currentPerson=l),type:"card"},{default:s(()=>[(f(!0),w(ue,null,me(Object.values(e.personList).filter(l=>l.isUnlocked),l=>(f(),y(O,{key:l.key,name:l.key,tab:e.renderTab(l)},{default:s(()=>[i(h,{style:{padding:"20px"}},{default:s(()=>[e.unlockedResearchList(l).length>0?(f(),y(d,{key:0,person:l,"research-list":e.unlockedResearchList(l)},null,8,["person","research-list"])):G("",!0)]),_:2},1024),e.unlockedDevice(l)?(f(),y(p,{key:0,research:e.unlockedDevice(l)},null,8,["research"])):G("",!0),e.countdownTriggered?(f(),y(N,{key:1,person:l},null,8,["person"])):G("",!0)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])}var lr=W(ar,[["render",ir]]);function cr(){const{personList:e,researchList:n,unlockableList:o}=se(),{sendNarrativeMessage:a,sendUnlockMessage:r,sendUnlockMessages:m}=ye(),{countdownTimer:d,countupTimer:h}=he(),{confetti:p,countdownTriggered:N,gameEnded:O,gameWon:S,isLoading:l,sellFeatureEnabled:C,slowdownEnabled:I,spokeToLennox:b,spokeToSama:D}=K();j(()=>{!N.value&&n[t.QUANTUM_COMPUTER].total>=1&&!l.value&&(N.value=!0,d.start(),h.stop(),a(q[H.UNLOCK_COUNTDOWN],[c.LENNOX_OLD]))}),j(()=>{!C.value&&n[t.QUANTUM_COMPUTER].total>=5&&!l.value&&(C.value=!0,a(q[H.UNLOCK_WORKERS],[c.LENNOX_OLD]))}),j(()=>{!I.value&&Object.values(n).find(A=>A.numWorkers>0)&&(I.value=!0,a(q[H.UNLOCK_SLOWDOWN],[c.LENNOX_OLD]))}),j(()=>{!e[c.LENNOX_YOUNG].isUnlocked&&n[t.QUANTUM_COMPUTER].total>=10&&I.value&&(e[c.LENNOX_YOUNG].isUnlocked=!0,n[t.BIOLOGY].isUnlocked=!0,r(n[t.BIOLOGY],e[c.LENNOX_YOUNG]),a(q[H.UNLOCK_YOUNG_LENNOX],[c.LENNOX_OLD]))}),j(()=>{!b.value&&n[t.BIOLOGY].total>=5&&!l.value&&(b.value=!0,a(q[H.SPEAK_TO_LENNOX],[c.LENNOX_OLD,c.LENNOX_YOUNG]))}),j(()=>{!e[c.SAMA].isUnlocked&&n[t.TELOMERE_STRETCHER].total>=1&&!l.value&&(e[c.SAMA].isUnlocked=!0,n[t.ALCHEMY].isUnlocked=!0,n[t.CRYSTAL_SARCOPHAGUS].isUnlocked=!0,n[t.CHRONOCRYSTALS].isUnlocked=!0,n[t.OMEGAPERSON].isUnlocked=!0,n[t.THE_FLUID].isUnlocked=!0,m([{research:n[t.ALCHEMY],person:e[c.SAMA]},{research:n[t.THE_FLUID],person:e[c.LENNOX_YOUNG]},{research:n[t.OMEGAPERSON],person:e[c.LENNOX_YOUNG]},{research:n[t.CHRONOCRYSTALS],person:e[c.LENNOX_OLD]},{research:n[t.CRYSTAL_SARCOPHAGUS],person:e[c.LENNOX_OLD]}]),a(q[H.UNLOCK_SAMA],[c.LENNOX_OLD]))}),j(()=>{!D.value&&n[t.ALCHEMY].total>=5&&!l.value&&(D.value=!0,a(q[H.SPEAK_TO_SAMA],[c.LENNOX_OLD,c.SAMA]))}),j(()=>{!e[c.ITOTIA].isUnlocked&&n[t.DISTILLER].total>=1&&!l.value&&(e[c.ITOTIA].isUnlocked=!0,n[t.MATHEMATICS].isUnlocked=!0,n[t.PHILOSOPHERS_STONE].isUnlocked=!0,n[t.ELEMENT_ZERO].isUnlocked=!0,m([{research:n[t.MATHEMATICS],person:e[c.ITOTIA]},{research:n[t.ELEMENT_ZERO],person:e[c.SAMA]},{research:n[t.PHILOSOPHERS_STONE],person:e[c.SAMA]}]),a(q[H.UNLOCK_ITOTIA],[c.LENNOX_OLD,c.ITOTIA]))}),j(()=>{!e[c.NECHTAN].isUnlocked&&n[t.NEPOHUALTZINTZIN].total>=1&&!l.value&&(e[c.NECHTAN].isUnlocked=!0,n[t.ASTRONOMY].isUnlocked=!0,n[t.TZOLKIN].isUnlocked=!0,n[t.OBSIDIAN].isUnlocked=!0,m([{research:n[t.ASTRONOMY],person:e[c.NECHTAN]},{research:n[t.OBSIDIAN],person:e[c.ITOTIA]},{research:n[t.TZOLKIN],person:e[c.ITOTIA]}]),a(q[H.UNLOCK_NECHTAN],[c.LENNOX_OLD,c.ITOTIA,c.NECHTAN]))}),j(()=>{if(l.value)return;const A=n[t.CRYSTAL_SARCOPHAGUS];!O.value&&A.total>0&&(d.stop(),O.value=!0,S.value=!0,p.value=!0,a(q[H.SUCCESS],[c.LENNOX_OLD,c.LENNOX_YOUNG,c.SAMA,c.ITOTIA,c.NECHTAN]))}),j(async()=>{!O.value&&d.isExpired()&&!l.value&&(O.value=!0,S.value=!1,a(q[H.FAILURE],[c.LENNOX_OLD,c.LENNOX_YOUNG,c.SAMA,c.ITOTIA,c.NECHTAN]))}),j(()=>{if(!l.value)for(const A in o){const F=o[A];let Y=null;if(F instanceof k&&(Y=e[F.personKey],!F.isUnlocked)){const J=n[F.unlockedBy];if(J){const Se=F.unlockThreshold;J.total>=Se&&(F.isUnlocked=!0,r(F,Y))}}}})}const ur={components:{NLayout:mn,TGameFooter:Zo,TGameHeader:Jo,TGameSider:as,TGameTabs:lr},setup(){const e=Ze(),{gamePaused:n,gameStarted:o,isLoading:a,saveStopwatch:r}=K(),{sendInitialMessage:m}=ye(),{startIncrements:d}=ce(),{saveGameState:h}=Me();return o.value||(m(),o.value=!0),d(),cr(),setTimeout(function(){hn(r.seconds,()=>{r.seconds.value%le.SAVE_INTERVAL==0&&!a.value&&!n.value&&h().then(e.success("Autosaved"))})},le.SAVE_INTERVAL*1e3),{}}};function dr(e,n,o,a,r,m){const d=u("t-game-header"),h=u("t-game-sider"),p=u("t-game-tabs"),N=u("n-layout"),O=u("t-game-footer");return f(),y(N,{position:"absolute"},{default:s(()=>[i(d),i(N,{"has-sider":""},{default:s(()=>[i(h),i(p)]),_:1}),i(O)]),_:1})}var pr=W(ur,[["render",dr]]);const mr={name:"App",components:{NConfigProvider:_n,NDialogProvider:fn,NMessageProvider:En,NNotificationProvider:Tn,TGame:pr},setup(){const{lightMode:e}=et(),n=x(!1),{loadGameState:o}=Me();return o().finally(function(){n.value=!0}),{enableGame:n,theme:()=>e.value?null:gn}}};function hr(e,n,o,a,r,m){const d=u("t-game"),h=u("n-message-provider"),p=u("n-notification-provider"),N=u("n-dialog-provider"),O=u("n-config-provider");return f(),y(O,{theme:a.theme()},{default:s(()=>[i(N,null,{default:s(()=>[i(p,null,{default:s(()=>[i(h,null,{default:s(()=>[a.enableGame?(f(),y(d,{key:0})):G("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["theme"])}var _r=W(mr,[["render",hr]]);const st=Nn(_r);st.component("TGameResearchButton",Ve);st.mount("#app");
